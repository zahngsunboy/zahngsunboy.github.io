<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="欢迎访问！">
<meta property="og:type" content="website">
<meta property="og:title" content="天伟小站">
<meta property="og:url" content="http://example.com/page/19/index.html">
<meta property="og:site_name" content="天伟小站">
<meta property="og:description" content="欢迎访问！">
<meta property="og:locale">
<meta property="article:author" content="张天伟">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/page/19/"/>





  <title>天伟小站</title>
  








<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">天伟小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">盐城工学院</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/06-Node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%EF%BC%9Apath%E8%B7%AF%E5%BE%84%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/11-Node.js/06-Node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%EF%BC%9Apath%E8%B7%AF%E5%BE%84%E6%A8%A1%E5%9D%97/" itemprop="url">06-Node.js内置模块：path路径模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="path-路径模块"><a href="#path-路径模块" class="headerlink" title="path 路径模块"></a>path 路径模块</h2><p>Node.js 通过<code>path</code>这个内置模块，提供了一些路径操作的API，具体可以参考官方的api文档。这里列举一些常用的API。</p>
<h3 id="path-extname-获取文件-路径的扩展名"><a href="#path-extname-获取文件-路径的扩展名" class="headerlink" title="path.extname() 获取文件/路径的扩展名"></a>path.extname() 获取文件/路径的扩展名</h3><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.extname(myPath);</span><br></pre></td></tr></table></figure>

<p>代码解释：</p>
<ul>
<li><p>获取 <code>myPath</code> 这个文件或者路径的扩展名。</p>
</li>
<li><p><code>myPath</code> 这个参数要求是字符串。如果 <code>myPath</code> 不是字符串，则抛出 TypeError。</p>
</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;hello.txt&#x27;</span>); <span class="comment">// 返回 &#x27;.txt&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;www.qianguyihao.com&#x27;</span>); <span class="comment">// 返回 &#x27;.com&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;index.coffee.md&#x27;</span>);  <span class="comment">// 返回 &#x27;.md&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;index.&#x27;</span>);  <span class="comment">// 返回 &#x27;.&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;index&#x27;</span>);  <span class="comment">// 返回 &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;.index&#x27;</span>);  <span class="comment">// 返回 &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;.index.md&#x27;</span>);  <span class="comment">// 返回 &#x27;.md&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="path-resolve-生成完成的绝对路径"><a href="#path-resolve-生成完成的绝对路径" class="headerlink" title="path.resolve() 生成完成的绝对路径"></a>path.resolve() 生成完成的绝对路径</h3><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.resolve([...myPaths])</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li><p>将路径或路径片段的序列解析为绝对路径。</p>
</li>
<li><p>返回的路径是<strong>从右往左</strong>处理，后面的每个 myPath 被依次解析，直到构造出一个完整的绝对路径。</p>
</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">&#x27;/foo1/foo2&#x27;</span>, <span class="string">&#x27;qianguyihao&#x27;</span>, <span class="string">&#x27;foo3&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> result1 = path.resolve(...arr1);</span><br><span class="line"><span class="built_in">console</span>.log(result1); <span class="comment">// 打印结果：/foo1/foo2/qianguyihao/foo3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&#x27;/foo1/foo2&#x27;</span>, <span class="string">&#x27;/qianguyihao&#x27;</span>, <span class="string">&#x27;foo3&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> result2 = path.resolve(...arr2);</span><br><span class="line"><span class="built_in">console</span>.log(result2); <span class="comment">// 打印结果：/qianguyihao/foo3</span></span><br></pre></td></tr></table></figure>

<h3 id="几个常见路径"><a href="#几个常见路径" class="headerlink" title="几个常见路径"></a>几个常见路径</h3><ul>
<li><p><code>__dirname</code>：这是一个常量，表示：当前执行文件所在<strong>完整目录</strong>。</p>
</li>
<li><p><code>__filename</code>：这是一个常量。表示：当前执行文件的<strong>完整目录 + 文件名</strong>。</p>
</li>
<li><p><code>process.cwd</code>：获取当前执行 Node命令 时的目录名。</p>
</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(__dirname);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(__filename);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(process.cwd());</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ node app.js</span><br><span class="line"></span><br><span class="line">/Users/smyhvae/qianguyihao</span><br><span class="line">/Users/smyhvae/qianguyihao/app.js</span><br><span class="line">/Users/smyhvae/qianguyihao</span><br></pre></td></tr></table></figure>

<h3 id="path-join-将多个路径进行拼接"><a href="#path-join-将多个路径进行拼接" class="headerlink" title="path.join() 将多个路径进行拼接"></a>path.join() 将多个路径进行拼接</h3><p>如果是我们手动拼接路径，容易出错。这个时候，可以利用 path.join() 方法将路径进行拼接。</p>
<p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.join([...paths]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>解释：使用平台特定的分隔符作为定界符将所有给定的 path 片段连接在一起，然后规范化生成的路径。</p>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = path.join(__dirname, <span class="string">&#x27;./app.js&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result1); <span class="comment">// 返回：/Users/smyhvae/qianguyihao/app.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result2 = path.join(<span class="string">&#x27;/foo1&#x27;</span>, <span class="string">&#x27;foo2&#x27;</span>, <span class="string">&#x27;./foo3&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result2); <span class="comment">// 返回：/foo1/foo2/foo3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result3 = path.join(<span class="string">&#x27;/foo1&#x27;</span>, <span class="string">&#x27;foo2&#x27;</span>, <span class="string">&#x27;/foo3&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result3); <span class="comment">// 返回：/foo1/foo2/foo3</span></span><br></pre></td></tr></table></figure>

<h2 id="OS-系统模块"><a href="#OS-系统模块" class="headerlink" title="OS 系统模块"></a>OS 系统模块</h2><ul>
<li>os.networkInterfaces() 查看网络地址</li>
</ul>
<h2 id="我的公众号"><a href="#我的公众号" class="headerlink" title="我的公众号"></a>我的公众号</h2><p>想学习<strong>更多技能</strong>？不妨关注我的微信公众号：<strong>千古壹号</strong>（id：<code>qianguyihao</code>）。</p>
<p>扫一扫，你将发现另一个全新的世界，而这将是一场美丽的意外：</p>
<p><img src="https://img.smyhvae.com/20200102.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/05-Node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%EF%BC%9Afs%E6%96%87%E4%BB%B6%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/11-Node.js/05-Node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%EF%BC%9Afs%E6%96%87%E4%BB%B6%E6%A8%A1%E5%9D%97/" itemprop="url">05-Node.js内置模块：fs文件模块</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="Node-js-的官方API文档"><a href="#Node-js-的官方API文档" class="headerlink" title="Node.js 的官方API文档"></a>Node.js 的官方API文档</h2><ul>
<li><p>Node.js 的API文档（英文）： <a target="_blank" rel="noopener" href="https://nodejs.org/docs/latest-v8.x/api/index.html">https://nodejs.org/docs/latest-v8.x/api/index.html</a></p>
</li>
<li><p>Node.js 的API文档（中文）：<a target="_blank" rel="noopener" href="http://nodejs.cn/api/">http://nodejs.cn/api/</a></p>
</li>
</ul>
<p>关于 Node.js 的内置模块和常见API，可以看官方文档。</p>
<p>查阅文档时，稳定指数如下：</p>
<ul>
<li><p>红色：废弃。</p>
</li>
<li><p>橙色：实验。表示当前版本可用，其他版本不确定。也许不向下兼容，建议不要在生产环境中使用该特性。</p>
</li>
<li><p>绿色：稳定。与 npm 生态系统的兼容性是最高的优先级。</p>
</li>
</ul>
<h2 id="Node-js-中模块的分类"><a href="#Node-js-中模块的分类" class="headerlink" title="Node.js 中模块的分类"></a>Node.js 中模块的分类</h2><p>Node.js 应用由模块组成，采用 CommonJS 模块规范。Node.js中的模块分为三种：</p>
<ul>
<li><p>内置模块</p>
</li>
<li><p>第三方模块</p>
</li>
<li><p>自定义模块</p>
</li>
</ul>
<p>下面简单介绍一下。</p>
<h3 id="1、内置模块"><a href="#1、内置模块" class="headerlink" title="1、内置模块"></a>1、内置模块</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> process = <span class="built_in">require</span>(<span class="string">&#x27;process&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(process.version);</span><br><span class="line"><span class="built_in">console</span>.log(path.resolve(<span class="string">&#x27;../&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>require方法用于加载模块。</p>
<p>常见的内置模块包括：</p>
<ul>
<li><p>FS：文件系统模块</p>
</li>
<li><p>path：路径模块</p>
</li>
<li><p>OS：操作系统相关</p>
</li>
<li><p>net：网络相关</p>
</li>
<li><p>http</p>
</li>
<li><p>…</p>
</li>
</ul>
<p>你可能会有疑问：Node.js 这么牛吗？还能直接和操作系统做交互？</p>
<p>带着这个疑问，我们不妨简单看看 Node.js 的源码，以 os 模块举例：</p>
<ul>
<li><p>打开os模块的源码：<a target="_blank" rel="noopener" href="https://github.com/nodejs/node/blob/master/lib/os.js">https://github.com/nodejs/node/blob/master/lib/os.js</a>，翻到最底部，找到 <code>cpus</code>这个方法</p>
</li>
<li><p>进而找到 <code>getCPUs()</code></p>
</li>
<li><p>internalBinding(‘os’)：通过 internalBinding 可以调用系统底层的方法。internalBinding 主要是 JS 虚拟机在做的事情。</p>
</li>
<li><p><code>internalBinding(&#39;os&#39;)</code> 的实现，在 <a target="_blank" rel="noopener" href="https://github.com/nodejs/node/blob/master/src/node_os.cc">https://github.com/nodejs/node/blob/master/src/node_os.cc</a> 里，里面都是 C++ 的代码。比如有一个<code>getCPUs</code>方法。</p>
</li>
</ul>
<p>现在你知道了，JS本身是没有能力获取底层系统资源的，这一切都是 JS虚拟机在和底层做交互，然后通过 JS 的表现形式，暴露给应用层。</p>
<p>另外，还有很多库，是直接使用C/++编写的，通过编译之后，再提供给 JS 应用层调用，或者直接提供给 Node.js层使用。</p>
<p>**所有的编程语言底层都会回归C/C++**，甚至是汇编语言。</p>
<h3 id="2、require-加载第三方包的机制"><a href="#2、require-加载第三方包的机制" class="headerlink" title="2、require 加载第三方包的机制"></a>2、require 加载第三方包的机制</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>require 加载第三方包的机制：</p>
<p>（1）第三方包安装好后，这个包一般会存放在当前项目的 node_modules 文件夹中。我们找到这个包的 package.json 文件，并且找到里面的main属性对应的入口模块，这个入口模块就是这个包的入口文件。</p>
<p>（2）如果第三方包中没有找到package.json文件，或者package.json文件中没有main属性，则默认加载第三方包中的index.js文件。</p>
<p>（3）如果在 node_modules 文件夹中没有找到这个包，或者以上所有情况都没有找到，则会向上一级父级目录下查找node_modules文件夹，查找规则如上一致。</p>
<p>（4）如果一直找到该模块的磁盘根路径都没有找到，则会报错：can not find module xxx。</p>
<h3 id="3、自定义模块（module）："><a href="#3、自定义模块（module）：" class="headerlink" title="3、自定义模块（module）："></a>3、自定义模块（module）：</h3><p>每个文件就是一个模块，有自己的作用域。在一个文件里面定义的变量、函数、类，都是私有的，对其他文件不可见。</p>
<p>举例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var example = require(&#x27;./example.js&#x27;);</span><br><span class="line">console.log(example.x); // 5</span><br><span class="line">console.log(example.addX(1)); // 6</span><br></pre></td></tr></table></figure>

<h2 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h2><p>今天这篇文章，重点讲一下 Node 内置模块中的 <strong>fs（文件处理模块）</strong>。</p>
<p>在使用文件模块之前，记得先导入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入文件模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>fs 的英文全称是 File System。fs 模块提供了很多 api 方法，我们首先应该学习的方法是<strong>文件读取</strong>。</p>
<p>Node中文件读取的方式主要有以下几种。</p>
<h3 id="异步读取文件-fs-readFile"><a href="#异步读取文件-fs-readFile" class="headerlink" title="异步读取文件 fs.readFile()"></a>异步读取文件 fs.readFile()</h3><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(file[, options], callback(error, data))</span><br></pre></td></tr></table></figure>

<p>代码举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;hello.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;异步读取数据：&#x27;</span> + data2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>如果需要嵌套读取多个文件，可以用 promise 或者 async … await 进行封装。代码举例如下。</p>
<h3 id="promise-封装-fs-readFile"><a href="#promise-封装-fs-readFile" class="headerlink" title="promise 封装 fs.readFile()"></a>promise 封装 fs.readFile()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fsRead</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(path, &#123; <span class="attr">flag</span>: <span class="string">&#x27;r&#x27;</span>, <span class="attr">encoding</span>: <span class="string">&quot;utf-8&quot;</span> &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">//失败执行的内容</span></span><br><span class="line">                reject(err)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//成功执行的内容</span></span><br><span class="line">                resolve(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise1 = fsRead(<span class="string">&#x27;hello1.txt&#x27;</span>)</span><br><span class="line">promise1.then(<span class="function"><span class="params">res1</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res1);</span><br><span class="line">    <span class="keyword">return</span> fsRead(<span class="string">&#x27;hello2.txt&#x27;</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res2</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res2);</span><br><span class="line">    <span class="keyword">return</span> fsRead(<span class="string">&#x27;hello3.txt&#x27;</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res3</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="async-…-await-封装-fs-readFile"><a href="#async-…-await-封装-fs-readFile" class="headerlink" title="async … await 封装 fs.readFile()"></a>async … await 封装 fs.readFile()</h3><p>这个写法更为简洁，推荐。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fsRead</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(path, &#123; <span class="attr">flag</span>: <span class="string">&#x27;r&#x27;</span>, <span class="attr">encoding</span>: <span class="string">&quot;utf-8&quot;</span> &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">//失败执行的内容</span></span><br><span class="line">                reject(err)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//成功执行的内容</span></span><br><span class="line">                resolve(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">ReadList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res1 = <span class="keyword">await</span> fsRead(<span class="string">&#x27;hello1.txt&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> res2 = <span class="keyword">await</span> fsRead(<span class="string">&#x27;hello2.txt&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> res3 = <span class="keyword">await</span> fsRead(<span class="string">&#x27;hello3.txt&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行方法</span></span><br><span class="line">ReadList();</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="同步读取文件-fs-readFileSync"><a href="#同步读取文件-fs-readFileSync" class="headerlink" title="同步读取文件 fs.readFileSync()"></a>同步读取文件 fs.readFileSync()</h3><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.readFileSync(file[, options])</span><br></pre></td></tr></table></figure>

<p>代码举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;hello.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="comment">// 文件不存在，或者权限错误</span></span><br><span class="line">  <span class="keyword">throw</span> e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Node-js-中的同步和异步的区别"><a href="#Node-js-中的同步和异步的区别" class="headerlink" title="Node.js 中的同步和异步的区别"></a>Node.js 中的同步和异步的区别</h3><p>fs模块对文件的几乎所有操作都有同步和异步两种形式。例如：readFile() 和 readFileSync()。</p>
<p>区别：</p>
<ul>
<li><p>同步调用会阻塞代码的执行，异步则不会。</p>
</li>
<li><p>异步调用会将 读取任务 下达到任务队列，直到任务执行完成才会回调。</p>
</li>
<li><p>异常处理方面：同步必须使用 try catch 方式，异步可以通过回调函数的第一个参数。【重要】</p>
</li>
</ul>
<h2 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h2><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.write(fd, string[, position[, encoding]], callback)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>async … await 封装：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeFs</span>(<span class="params">path, content</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        fs.writeFile(path, content, &#123; <span class="attr">flag</span>: <span class="string">&quot;a&quot;</span>, <span class="attr">encoding</span>: <span class="string">&quot;utf-8&quot;</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">//console.log(&quot;写入内容出错&quot;)</span></span><br><span class="line">                reject(err)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                resolve(err)</span><br><span class="line">                <span class="comment">//console.log(&quot;写入内容成功&quot;)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">writeList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">await</span> writeFs(<span class="string">&#x27;1.html&#x27;</span>, <span class="string">&quot;&lt;h1&gt;qianguyihao&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    <span class="keyword">await</span> writeFs(<span class="string">&#x27;2.html&#x27;</span>, <span class="string">&quot;&lt;h1&gt;hello world&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    <span class="keyword">await</span> writeFs(<span class="string">&#x27;3.html&#x27;</span>, <span class="string">&quot;&lt;h1&gt;永不止步&lt;/h1&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">writeList()</span><br></pre></td></tr></table></figure>

<h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.unlink(path, callback)</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li>path：文件路径。</li>
<li>callback：回调函数。</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fs.unlink(<span class="string">&#x27;path/file.txt&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件删除成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>备注：<code>fs.unlink()</code> 不能用于删除目录。 如果要删除目录，可以使用 <code>fs.rmdir()</code>。</p>
<h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><p>通过 Buffer 开辟的内存空间，都是连续的内存空间，所以效率比较高。</p>
<p>代码举例1：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 将字符串转成 buffer 对象</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;qianguyihao&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> buffer = Buffer.from(str);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(buffer); <span class="comment">// 输出16进制编码</span></span><br><span class="line"><span class="built_in">console</span>.log(buffer.toString()); <span class="comment">// 输出字符串：qianguyihao</span></span><br></pre></td></tr></table></figure>

<p>代码举例2：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从内存中开辟一个新的缓冲区</span></span><br><span class="line"><span class="keyword">let</span> buffer = Buffer.alloc(<span class="number">20</span>);</span><br><span class="line">buffer[<span class="number">0</span>] = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(buffer);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="读取目录"><a href="#读取目录" class="headerlink" title="读取目录"></a>读取目录</h2><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.mkdir(path[, options], callback)</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li><p>path：文件路径。</p>
</li>
<li><p>options参数可以是：</p>
<ul>
<li>recursive：是否以递归的方式创建目录，默认为 false。</li>
<li>mode：设置目录权限，默认为 0777。</li>
</ul>
</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">​</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;查看 /tmp 目录&quot;</span>);</span><br><span class="line">fs.readdir(<span class="string">&quot;/tmp/&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err, files</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   files.forEach( <span class="function"><span class="keyword">function</span> (<span class="params">file</span>)</span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log( file );</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>其他的还有：（暂略）</p>
<ul>
<li><p>删除目录</p>
</li>
<li><p>输入输出</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/04-Node.js%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83%EF%BC%9ACommonJS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/11-Node.js/04-Node.js%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83%EF%BC%9ACommonJS/" itemprop="url">04-Node.js模块化规范：CommonJS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>网站越来越复杂，js代码、js文件也越来越多，会遇到<strong>一些问题</strong>：</p>
<ul>
<li><p>文件依赖</p>
</li>
<li><p>全局污染、命名冲突</p>
</li>
</ul>
<p>程序模块化包括：</p>
<ul>
<li><p>日期模块</p>
</li>
<li><p>数学计算模块</p>
</li>
<li><p>日志模块</p>
</li>
<li><p>登陆认证模块</p>
</li>
<li><p>报表展示模块等。</p>
</li>
</ul>
<p>所有这些模块共同组成了程序软件系统。</p>
<p>一次编写，多次使用，才是提高效率的核心。</p>
<h2 id="模块化的理解"><a href="#模块化的理解" class="headerlink" title="模块化的理解"></a>模块化的理解</h2><h3 id="什么是模块化"><a href="#什么是模块化" class="headerlink" title="什么是模块化"></a>什么是模块化</h3><p><strong>概念</strong>：将一个复杂的程序依据一定的规则（规范）封装成几个块（文件），并组合在一起。</p>
<p>模块的内部数据、实现是私有的, 只是向外部暴露一些接口(方法)与外部其它模块通信。</p>
<p>最早的时候，我们会把所有的代码都写在一个js文件里，那么，耦合性会很高（关联性强），不利于维护；而且会造成全局污染，很容易命名冲突。</p>
<h3 id="模块化的好处"><a href="#模块化的好处" class="headerlink" title="模块化的好处"></a>模块化的好处</h3><ul>
<li><p>避免命名冲突，减少命名空间污染</p>
</li>
<li><p>降低耦合性；更好地分离、按需加载</p>
</li>
<li><p><strong>高复用性</strong>：代码方便重用，别人开发的模块直接拿过来就可以使用，不需要重复开发类似的功能。</p>
</li>
<li><p><strong>高可维护性</strong>：软件的声明周期中最长的阶段其实并不是开发阶段，而是维护阶段，需求变更比较频繁。使用模块化的开发，方式更容易维护。</p>
</li>
<li><p>部署方便</p>
</li>
</ul>
<h2 id="模块化规范"><a href="#模块化规范" class="headerlink" title="模块化规范"></a>模块化规范</h2><h3 id="模块化规范的引入"><a href="#模块化规范的引入" class="headerlink" title="模块化规范的引入"></a>模块化规范的引入</h3><p>假设我们引入模块化，首先可能会想到的思路是：在一个文件中引入多个js文件。如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;zepto.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;fastClick.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;util/login.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;util/base.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;util/city.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但是这样做会带来很多问题：</p>
<ul>
<li><p>请求过多：引入十个js文件，就有十次http请求。</p>
</li>
<li><p>依赖模糊：不同的js文件可能会相互依赖，如果改其中的一个文件，另外一个文件可能会报错。</p>
</li>
</ul>
<p>以上两点，最终导致：<strong>难以维护</strong>。</p>
<p>于是，这就引入了模块化规范。</p>
<h3 id="模块化的概念解读"><a href="#模块化的概念解读" class="headerlink" title="模块化的概念解读"></a>模块化的概念解读</h3><p>模块化起源于 Node.js。Node.js 中把很多 js 打包成 package，需要的时候直接通过 require 的方式进行调用（CommonJS），这就是模块化的方式。</p>
<p>那如何把这种模块化思维应用到前端来呢？这就产生了两种伟大的 js：RequireJS 和 SeaJS。</p>
<h3 id="模块化规范-1"><a href="#模块化规范-1" class="headerlink" title="模块化规范"></a>模块化规范</h3><p>服务器端规范：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.commonjs.org/"><strong>CommonJS规范</strong></a>：是 Node.js 使用的模块化规范。</li>
</ul>
<p>CommonJS 就是一套约定标准，不是技术。用于约定我们的代码应该是怎样的一种结构。</p>
<p>浏览器端规范：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/amdjs/amdjs-api"><strong>AMD规范</strong></a>：是 <strong><a target="_blank" rel="noopener" href="http://requirejs.org/">RequireJS</a></strong> 在推广过程中对模块化定义的规范化产出。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 异步加载模块；</span><br><span class="line"></span><br><span class="line">- 依赖前置、提前执行：require([`foo`,`bar`],function(foo,bar)&#123;&#125;);   //也就是说把所有的包都 require 成功，再继续执行代码。</span><br><span class="line"></span><br><span class="line">- define 定义模块：define([`require`,`foo`],function()&#123;return&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>**<a href="">CMD规范</a>**：是 <strong><a target="_blank" rel="noopener" href="http://seajs.org/">SeaJS</a></strong> 在推广过程中对模块化定义的规范化产出。淘宝团队开发。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">同步加载模块；</span><br><span class="line"></span><br><span class="line">依赖就近，延迟执行：require(./a) 直接引入。或者Require.async 异步引入。   //依赖就近：执行到这一部分的时候，再去加载对应的文件。</span><br><span class="line"></span><br><span class="line">define 定义模块， export 导出：define(function(require, export, module)&#123;&#125;);</span><br></pre></td></tr></table></figure>


<p>PS：面试时，经常会问AMD 和 CMD 的区别。</p>
<p>另外，还有ES6规范：import &amp; export。</p>
<p>这篇文章，我们来讲一下<code>CommonJS</code>，它是 Node.js 使用的模块化规范。</p>
<h2 id="CommonJS-的基本语法"><a href="#CommonJS-的基本语法" class="headerlink" title="CommonJS 的基本语法"></a>CommonJS 的基本语法</h2><h3 id="CommonJS-的介绍"><a href="#CommonJS-的介绍" class="headerlink" title="CommonJS 的介绍"></a>CommonJS 的介绍</h3><p><a target="_blank" rel="noopener" href="http://www.commonjs.org/">CommonJS</a>：是 Node.js 使用的模块化规范。也就是说，Node.js 就是基于 CommonJS 这种模块化规范来编写的。</p>
<p>CommonJS 规范规定：每个模块内部，module 变量代表当前模块。这个变量是一个对象，它的 exports 属性（即 module.exports）是对外的接口对象。加载某个模块，其实是加载该模块的 module.exports 对象。</p>
<p>在 CommonJS 中，每个文件都可以当作一个模块：</p>
<ul>
<li><p>在服务器端：模块的加载是运行时同步加载的。</p>
</li>
<li><p>在浏览器端: 模块需要提前编译打包处理。首先，既然同步的，很容易引起阻塞；其次，浏览器不认识<code>require</code>语法，因此，需要提前编译打包。</p>
</li>
</ul>
<h3 id="模块的暴露和引入"><a href="#模块的暴露和引入" class="headerlink" title="模块的暴露和引入"></a>模块的暴露和引入</h3><p>Node.js 中只有模块级作用域，两个模块之间的变量、方法，默认是互不冲突，互不影响，这样就导致一个问题：模块 A 要怎样使用模块B中的变量&amp;方法呢？这就需要通过 <code>exports</code> 关键字来实现。</p>
<p>Node.js中，每个模块都有一个 exports 接口对象，我们可以把公共的变量、方法挂载到这个接口对象中，其他的模块才可以使用。</p>
<p>接下来详细讲一讲模块的暴露、模块的引入。</p>
<h3 id="暴露模块的方式一：-exports"><a href="#暴露模块的方式一：-exports" class="headerlink" title="暴露模块的方式一： exports"></a>暴露模块的方式一： exports</h3><p><code>exports</code>对象用来导出当前模块的公共方法或属性。别的模块通过 require 函数调用当前模块时，得到的就是当前模块的 exports 对象。</p>
<p><strong>语法格式</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 相当于是：给 exports 对象添加属性</span></span><br><span class="line"><span class="built_in">exports</span>.xxx = value</span><br></pre></td></tr></table></figure>

<p>这个 value 可以是任意的数据类型。</p>
<p><strong>注意</strong>：暴露的关键词是<code>exports</code>，不是<code>export</code>。其实，这里的 exports 类似于 ES6 中的 export 的用法，都是用来导出一个指定名字的对象。</p>
<p><strong>代码举例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;qianguyihao&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.name = name;</span><br><span class="line"><span class="built_in">exports</span>.foo = foo;</span><br></pre></td></tr></table></figure>



<h3 id="暴露模块的方式二：-module-exports"><a href="#暴露模块的方式二：-module-exports" class="headerlink" title="暴露模块的方式二： module.exports"></a>暴露模块的方式二： module.exports</h3><p><code>module.exports</code>用来导出一个默认对象，没有指定对象名。</p>
<p>语法格式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一：导出整个 exports 对象</span></span><br><span class="line"><span class="built_in">module</span>.exports = value;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二：给 exports 对象添加属性</span></span><br><span class="line"><span class="built_in">module</span>.exports.xxx = value;</span><br></pre></td></tr></table></figure>

<p>这个 value 可以是任意的数据类型。</p>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;我是 module1&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们不能再继续写 module.exports = value2。因为重新赋值，会把 exports 对象 之前的赋值覆盖掉。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2</span></span><br><span class="line"><span class="keyword">const</span> age = <span class="number">28</span>;</span><br><span class="line"><span class="built_in">module</span>.exports.age = age;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>module.exports</code> 还可以修改模块的原始导出对象。比如当前模块原本导出的是一个对象，我们可以通过 module.exports 修改为导出一个函数。如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="exports-和-module-exports-的区别"><a href="#exports-和-module-exports-的区别" class="headerlink" title="exports 和 module.exports 的区别"></a>exports 和 module.exports 的区别</h3><p>最重要的区别：</p>
<ul>
<li><p>使用exports时，只能单个设置属性 <code>exports.a = a;</code></p>
</li>
<li><p>使用module.exports时，既单个设置属性 <code>module.exports.a</code>，也可以整个赋值 <code>module.exports = obj</code>。</p>
</li>
</ul>
<p>其他要点：</p>
<ul>
<li><p>Node中每个模块的最后，都会执行 <code>return: module.exports</code>。</p>
</li>
<li><p>Node中每个模块都会把 <code>module.exports</code>指向的对象赋值给一个变量 <code>exports</code>，也就是说 <code>exports = module.exports</code>。</p>
</li>
<li><p><code>module.exports = XXX</code>，表示当前模块导出一个单一成员，结果就是XXX。</p>
</li>
<li><p>如果需要导出多个成员，则必须使用 <code>exports.add = XXX; exports.foo = XXX</code>。或者使用 <code>module.exports.add = XXX; module.export.foo = XXX</code>。</p>
</li>
</ul>
<h3 id="问题-暴露的模块到底是谁？"><a href="#问题-暴露的模块到底是谁？" class="headerlink" title="问题: 暴露的模块到底是谁？"></a>问题: 暴露的模块到底是谁？</h3><p><strong>答案</strong>：暴露的本质是<code>exports</code>对象。【重要】</p>
<p>比如，方式一的 <code>exports.a = a</code> 可以理解成是，<strong>给 exports 对象添加属性</strong>。方式二的 <code>module.exports = a</code>可以理解成是给整个 exports 对象赋值。方式二的 <code>module.exports.c = c</code>可以理解成是给 exports 对象添加属性。</p>
<p>Node.js 中每个模块都有一个 module 对象，module 对象中的有一个 exports 属性称之为<strong>接口对象</strong>。我们需要把模块之间公共的方法或属性挂载在这个接口对象中，方便其他的模块使用。</p>
<h3 id="引入模块的方式：require"><a href="#引入模块的方式：require" class="headerlink" title="引入模块的方式：require"></a>引入模块的方式：require</h3><p>require函数用来在一个模块中引入另外一个模块。传入模块名，返回模块导出对象。</p>
<p><strong>语法格式</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> module1 = <span class="built_in">require</span>(<span class="string">&#x27;模块名&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li><p>内置模块：require的是<strong>包名</strong>。</p>
</li>
<li><p>下载的第三方模块：require的是<strong>包名</strong>。</p>
</li>
<li><p>自定义模块：require的是<strong>文件路径</strong>。文件路径既可以用绝对路径，也可以用相对路径。后缀名<code>.js</code>可以省略。</p>
</li>
</ul>
<p><strong>代码举例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> module1 = <span class="built_in">require</span>(<span class="string">&#x27;./main.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> module2 = <span class="built_in">require</span>(<span class="string">&#x27;./main&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> module3 = <span class="built_in">require</span>(<span class="string">&#x27;Demo/src/main.js&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>require()函数的两个作用</strong>：</p>
<ul>
<li><p>执行导入的模块中的代码。</p>
</li>
<li><p>返回导入模块中的接口对象。</p>
</li>
</ul>
<h3 id="主模块"><a href="#主模块" class="headerlink" title="主模块"></a>主模块</h3><p>主模块是整个程序执行的入口，可以调度其他模块。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 运行main.js启动程序。此时，main.js就是主模块</span></span><br><span class="line">$ node main.js</span><br></pre></td></tr></table></figure>

<h3 id="模块的初始化"><a href="#模块的初始化" class="headerlink" title="模块的初始化"></a>模块的初始化</h3><p>一个模块中的 JS 代码仅在模块<strong>第一次被使用时</strong>执行一次，并且在使用的过程中进行初始化，然后会被缓存起来，便于后续继续使用。</p>
<p>代码举例：</p>
<p>（1）calModule.js:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">​</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ++a;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="built_in">exports</span>.add = add;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>（2）main.js：（在 main.js 中引入 hello.js 模块）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addModule1 = <span class="built_in">require</span>(<span class="string">&#x27;./calModule&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> addModule2 = <span class="built_in">require</span>(<span class="string">&#x27;./calModule&#x27;</span>)</span><br><span class="line">​</span><br><span class="line"><span class="built_in">console</span>.log(addModule1.add());</span><br><span class="line"><span class="built_in">console</span>.log(addModule2.add());</span><br></pre></td></tr></table></figure>

<p>在命令行执行 <code>node main.js</code> 运行程序，打印结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<p>从打印结果中可以看出，<code>calModule.js</code>这个模块虽然被引用了两次，但只初始化了一次。</p>
<h2 id="CommonJS-在服务器端的实现举例"><a href="#CommonJS-在服务器端的实现举例" class="headerlink" title="CommonJS 在服务器端的实现举例"></a>CommonJS 在服务器端的实现举例</h2><h3 id="1、初始化项目"><a href="#1、初始化项目" class="headerlink" title="1、初始化项目"></a>1、初始化项目</h3><p>在工程文件中新建如下目录和文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">modules</span><br><span class="line">    | module1.js</span><br><span class="line">    | module2.js</span><br><span class="line">    | module3.js</span><br><span class="line"></span><br><span class="line">app.js</span><br></pre></td></tr></table></figure>

<p>然后在根目录下新建如下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>


<p>然后根据提示，依次输入如下内容：</p>
<ul>
<li><p><strong>包名</strong>：可以自己起包名，也可以用默认的包名。注意，包名里不能有中文，不能有大写。</p>
</li>
<li><p><strong>版本</strong>：可以用默认的版本 1.0.0，也可以自己修改包名。</p>
</li>
</ul>
<p>其他的参数，一路回车即可。效果如下：</p>
<p><img src="http://img.smyhvae.com/20180410_1425.png"></p>
<p>于是，根目录下会自动生成<code>package.json</code>这个文件。点进去看一下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;commonjs_node&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;app.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;smyhvae&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="2、导入第三方包"><a href="#2、导入第三方包" class="headerlink" title="2、导入第三方包"></a>2、导入第三方包</h3><p><code>uniq</code>这个第三方包的作用是保证唯一性（我们拿它来举例）。我们在当前工程目录下，输入如下命令进行安装：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install uniq</span><br></pre></td></tr></table></figure>

<p>安装成功后，根目录下会自动生成相应的文件：</p>
<p><img src="http://img.smyhvae.com/20180410_1450.png"></p>
<p>需要说明的是，我的node版本是 v8.10.0（v8以上），对应的 npm 版本是 v5.6.0，版本比较高，因此，当我输入完<code>npm install uniq</code>之后，<code>package.json</code>中就会自动添加<code>uniq</code>包的依赖：</p>
<p><img src="http://img.smyhvae.com/20180410_1855.png"></p>
<p>如果有些童鞋的npm版本较低，就需要手动去添加依赖；另一种方式是，可以使用<code>npm install uniq --save</code>命令，这个多出来的<code>--save</code>就可以自动添加依赖。</p>
<p>我们去<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/uniq">官网</a>看一下<code>uniq</code>的用法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> uniq = <span class="built_in">require</span>(<span class="string">&#x27;uniq&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line">uniq(arr);</span><br><span class="line"><span class="built_in">console</span>.log(arr);  <span class="comment">//输出结果：[ 1, 2, 3, 5 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以看出，这个包可以起到数组去重的作用。</p>
<h3 id="3、自定义模块"><a href="#3、自定义模块" class="headerlink" title="3、自定义模块"></a>3、自定义模块</h3><p>（1）module1.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露方式一：module.exports = value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//暴露一个对象出去</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;我是 module1&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//我们不能再继续写 module.exports = xxx。因为重新赋值，会把之前的赋值覆盖掉。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>（2）module2.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露方式一：module.exports = value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//暴露一个函数出去</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我是 module2&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，此时暴露出去的 exports 对象 等价于整个函数。</p>
<p>（3）module3.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露方式二：exports.xxx = value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//可以往 export 对象中不断地添加属性，进行暴露</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.foo1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;module3 中的 foo1 方法&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.foo2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;module3 中的 foo2 方法&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">11</span>];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>（4）app.js：（将其他模块汇集到主模块）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将其他模块汇集到主模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> uniq = <span class="built_in">require</span>(<span class="string">&#x27;uniq&#x27;</span>); <span class="comment">//引入时，第三方模块要放在自定义模块的上面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> module1 = <span class="built_in">require</span>(<span class="string">&#x27;./modules/module1&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> module2 = <span class="built_in">require</span>(<span class="string">&#x27;./modules/module2&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> module3 = <span class="built_in">require</span>(<span class="string">&#x27;./modules/module3&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用module1对象的方法</span></span><br><span class="line">module1.foo();</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用module2的函数</span></span><br><span class="line">module2();  <span class="comment">//注意，在定义时，module2对象等价于整个函数function。所以，module2()的意思是，直接调用了函数。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用module3中的属性</span></span><br><span class="line">module3.foo1();</span><br><span class="line">module3.foo2();</span><br><span class="line"></span><br><span class="line">uniq(module3.arr); <span class="comment">//将module3中的数组进行去重操作</span></span><br><span class="line"><span class="built_in">console</span>.log(module3.arr); <span class="comment">//打印数组去重后的结果</span></span><br></pre></td></tr></table></figure>

<p>这样的话，我们的代码就写完了。</p>
<p>我们在命令行中输入<code>node app.js</code>，就可以把代码跑起来了。打印结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">我是 module1</span><br><span class="line">我是 module2</span><br><span class="line">module3 中的 foo1 方法</span><br><span class="line">module3 中的 foo2 方法</span><br><span class="line">[ 1, 11, 2, 3, 5 ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="CommonJS-基于浏览器端的实现举例"><a href="#CommonJS-基于浏览器端的实现举例" class="headerlink" title="CommonJS 基于浏览器端的实现举例"></a>CommonJS 基于浏览器端的实现举例</h2><h3 id="1、初始化项目-1"><a href="#1、初始化项目-1" class="headerlink" title="1、初始化项目"></a>1、初始化项目</h3><p>在工程文件中新建如下目录和文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">js</span><br><span class="line">    dist //打包生成文件的目录</span><br><span class="line">    src //源码所在的目录</span><br><span class="line">      | module1.js</span><br><span class="line">      | module2.js</span><br><span class="line">      | module3.js</span><br><span class="line">      | app.js //应用主源文件</span><br><span class="line">index.html    //因为CommonJS是基于浏览器端，js文件要跑在浏览器的页面上，所以要有这个html页面</span><br></pre></td></tr></table></figure>

<p>然后在根目录下新建如下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>


<p>然后根据提示，依次输入如下内容：</p>
<ul>
<li><p><strong>包名</strong>：可以自己起包名，也可以用默认的包名。注意，包名里不能有中文，不能有大写。</p>
</li>
<li><p><strong>版本</strong>：可以用默认的版本 1.0.0，也可以自己修改包名。</p>
</li>
</ul>
<p>其他的参数，一路回车即可。</p>
<p>于是，根目录下会自动生成<code>package.json</code>这个文件。点进去看一下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;commonjs_browser&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="2、下载第三方包：Browserify"><a href="#2、下载第三方包：Browserify" class="headerlink" title="2、下载第三方包：Browserify"></a>2、下载第三方包：Browserify</h3><p>这里需要用到<a target="_blank" rel="noopener" href="http://browserify.org/">Browserify</a>这个工具进行编译打包。Browserify 称为 CommonJS 的浏览器端的打包工具。</p>
<p>输入如下命令进行安装：（两个命令都要输入）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install browserify -g          <span class="comment">//全局</span></span><br><span class="line">npm install browserify --save-dev  <span class="comment">//局部。</span></span><br></pre></td></tr></table></figure>

<p>上面的代码中，<code>-dev</code>表示开发依赖。这里解释一下相关概念：</p>
<ul>
<li><p>开发依赖：当前这个包，只在开发环境下使用。</p>
</li>
<li><p>运行依赖：当前这个包，是在生产环境下使用。</p>
</li>
</ul>
<h3 id="3、自定义模块-amp-代码运行"><a href="#3、自定义模块-amp-代码运行" class="headerlink" title="3、自定义模块 &amp; 代码运行"></a>3、自定义模块 &amp; 代码运行</h3><p>（1）module1.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露方式一：module.exports = value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//暴露一个对象出去</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;我是 module1&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//我们不能再继续写 module.exports = xxx。因为重新赋值，会把之前的赋值覆盖掉。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>（2）module2.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露方式一：module.exports = value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//暴露一个函数出去</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我是 module2&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，此时暴露出去的 exports 对象 等价于整个函数。</p>
<p>（3）module3.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露方式二：exports.xxx = value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//可以往export对象中不断地添加属性，进行暴露</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.foo1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;module3 中的 foo1 方法&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.foo2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;module3 中的 foo2 方法&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（4）app.js：（将其他模块汇集到主模块）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> module1 = <span class="built_in">require</span>(<span class="string">&#x27;./module1&#x27;</span>);  <span class="comment">// ./ 指的是当前路径</span></span><br><span class="line"><span class="keyword">let</span> module2 = <span class="built_in">require</span>(<span class="string">&#x27;./module2&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> module3 = <span class="built_in">require</span>(<span class="string">&#x27;./module3&#x27;</span>);</span><br><span class="line"></span><br><span class="line">module1.foo();</span><br><span class="line">module2();</span><br><span class="line">module3.foo1();</span><br><span class="line">module3.foo2();</span><br></pre></td></tr></table></figure>

<p>引入的路径解释：</p>
<ul>
<li><code>./</code>是相对路径，指的是当前路径（app.js的当前路径是src）</li>
</ul>
<p>到此，我们的主要代码就写完了。</p>
<p>但是，如果我们直接在index.html中，像下面这样写，是不行的：（因为浏览器不认识 require 关键字）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/src/app.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>为了能够让index.html引入app.js，我们需要输入如下命令：</p>
<p>打包处理js:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browserify js/src/app.js -o js/dist/bundle.js</span><br></pre></td></tr></table></figure>

<p>然后在index.html中引入打包后的文件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/dist/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
















          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/03-Node.js%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/11-Node.js/03-Node.js%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/" itemprop="url">03-Node.js开发环境安装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="Node-js-运行环境配置：通过-Node-js-安装包（不推荐）"><a href="#Node-js-运行环境配置：通过-Node-js-安装包（不推荐）" class="headerlink" title="Node.js 运行环境配置：通过 Node.js 安装包（不推荐）"></a>Node.js 运行环境配置：通过 Node.js 安装包（不推荐）</h2><p>去 Node.js 的<a target="_blank" rel="noopener" href="https://nodejs.org/en/">官网</a>下载安装包：</p>
<p><img src="http://img.smyhvae.com/20180301_1505.png"></p>
<p>我们也可以在<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/releases/">https://nodejs.org/en/download/releases/</a> 里下载历史版本。</p>
<p><img src="http://img.smyhvae.com/20180301_1507.png"></p>
<p>注意，我们以一定要用偶数版（V4、V6 等)，不要用奇数版（比如 V5），因为奇数版不稳定。</p>
<p>后续如果需要安装其他版本，可以这样做：重新下载最新的安装包，覆盖安装即可。</p>
<p>但我们并不推荐直接采用 Node.js.msi（windows）或者 Node.js.pkg（Mac） 安装包进行安装，因为会产生如下问题。</p>
<p><strong>通过 Node.js 安装包产生的问题</strong>：</p>
<ul>
<li><p>  安装新版本时，需要覆盖就版本；而且以前版本安装的很多全局工具包，需要重新安装。</p>
</li>
<li><p>  无法回滚到之前的旧版本。</p>
</li>
<li><p>  无法在多个版本之间切换（很多时候，不同的项目需要使用特定版本。或者，我想临时尝鲜一下新版本的特性）</p>
</li>
</ul>
<p>因此，我们暂时先不用安装 Node.js，稍后用 NVM 的方式来安装 Node.js。通过 NVM 的方式，可以让多个版本的 Node.js 共存，并灵活切换。</p>
<h3 id="Node-js-版本常识"><a href="#Node-js-版本常识" class="headerlink" title="Node.js 版本常识"></a>Node.js 版本常识</h3><ul>
<li><p>  偶数版本为稳定版（0.6.x ，0.8.x ，8.10.x）</p>
</li>
<li><p>  奇数版本为非稳定版（0.7.x ，0.9.x ，9.11.x）</p>
</li>
<li><p>  LTS（Long Term Support）</p>
</li>
</ul>
<p>参考链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012532033/article/details/73332099">node.js 中 LTS 和 Current 的区别</a></p>
<h2 id="Node-js-运行环境安装：通过-NVM（推荐）"><a href="#Node-js-运行环境安装：通过-NVM（推荐）" class="headerlink" title="Node.js 运行环境安装：通过 NVM（推荐）"></a>Node.js 运行环境安装：通过 NVM（推荐）</h2><p>**<a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm">NVM</a>**：node.js version manager，用来管理 node 的版本。</p>
<p><strong>我们可以先安装 NVM，然后通过 NVM 安装 Node.js</strong>。这是官方推荐的做法。</p>
<p>Windows 和 Mac 下安装的 Node.js 的步骤如下。</p>
<h3 id="Windows-系统安装-Node-js"><a href="#Windows-系统安装-Node-js" class="headerlink" title="Windows 系统安装 Node.js"></a>Windows 系统安装 Node.js</h3><p><strong>1、安装 NVM</strong>：</p>
<p>（1）我们去 <a target="_blank" rel="noopener" href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a> 下载 NVM 的安装包：</p>
<p><img src="http://img.smyhvae.com/20180301_1603.png"></p>
<p>下载下来后，直接解压到 <code>D:\web</code>目录下：</p>
<p><img src="http://img.smyhvae.com/20180301_1610.png"></p>
<p>（2）在上面的目录中，新建一个<code>settings.txt</code>文件，里面的内容填充如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root: D:\web\nvm</span><br><span class="line">path: D:\web\nodejs</span><br><span class="line">arch: 64</span><br><span class="line">proxy</span><br></pre></td></tr></table></figure>

<p>上方内容的解释：</p>
<ul>
<li><p>  root 配置为：当前 nvm.exe 所在的目录</p>
</li>
<li><p>  path 配置为：node 快捷方式所在的目录</p>
</li>
<li><p>  arch 配置为：当前操作系统的位数（32/64）</p>
</li>
<li><p>  proxy 不用配置</p>
</li>
</ul>
<p>（3）配置环境变量：</p>
<ul>
<li><p>  <code>NVM_HOME</code> = <code>D:\web\nvm</code>（当前 nvm.exe 所在目录）</p>
</li>
<li><p>  <code>NVM_SYMLINK</code> = <code>D:\web\nodejs</code> （node 快捷方式所在的目录）</p>
</li>
<li><p>  PATH += <code>;%NVM_HOME%;%NVM_SYMLINK%</code></p>
</li>
</ul>
<p>配置成功后，重启资源管理器。</p>
<p><strong>2、验证：</strong>(在 cmd 命令行中输入命令)</p>
<p>（1）输入<code>nvm</code>命令查看环境变量是否配置成功：</p>
<p><img src="http://img.smyhvae.com/20180301_1645.png"></p>
<p>（2）输入 <code>nvm ls</code>，查看已安装的所有 node 版本。</p>
<p>（3）输入 <code>nvm -v</code>，查看 已安装的 nvm 版本。</p>
<p>（4）输入 <code>node -v</code>，查看正在使用的 node 版本。</p>
<p>如果 Node 安装失败，可以参考上面这个链接。</p>
<p><strong>3、安装指定版本的 Node.js</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvm install 版本号</span><br><span class="line"></span><br><span class="line"><span class="comment"># 举例</span></span><br><span class="line">nvm install 8.10.0</span><br></pre></td></tr></table></figure>

<p>输入 <code>node -v</code>，查看当前使用的 node 版本。</p>
<p>关于 NVM 的常用命令，详见下一段。</p>
<p>补充：</p>
<p>如果 Node 安装失败，可以在上方的 <code>settings.txt</code>文件中，新增如下两行，修改镜像源：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node_mirror: https://npm.taobao.org/mirrors/node/</span><br><span class="line">npm_mirror: https://npm.taobao.org/mirrors/npm/</span><br></pre></td></tr></table></figure>

<ul>
<li>参考链接：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000011114680">安装 npm，nvm，node</a></li>
</ul>
<h3 id="Mac-系统安装-Node-js"><a href="#Mac-系统安装-Node-js" class="headerlink" title="Mac 系统安装 Node.js"></a>Mac 系统安装 Node.js</h3><p><strong>1、安装 NVM</strong>：</p>
<p>（1）打开 终端.app，输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash</span><br></pre></td></tr></table></figure>

<p>安装成功的界面：</p>
<p><img src="http://img.smyhvae.com/20180302_2126.png"></p>
<p>完成后，nvm 就被安装在了<code>~/.nvm</code>下。</p>
<p>如果发现安装失败：</p>
<p><img src="http://img.smyhvae.com/20180302_2111.png"></p>
<p>原因：Xcode 软件进行过更新。</p>
<p>解决办法：打开 Xcode 软件，同意相关内容即可。</p>
<p>（2）配置环境变量：</p>
<p>编辑器打开<code>~/.bash_profile</code>文件，如果不会就输入<code>open ~/.bash_profile</code>。</p>
<p>（补充：如果你的 Mac 电脑里找不到<code>~/.bash_profile</code>文件，那就找找有没有<code>~/.profile</code>文件，或者<code>~/.bashrc</code>文件，或者<code>~/.zshrc</code>文件。如果还是没有，那你就手动创建一个<code>~/.bash_profile</code>文件）。</p>
<p>在最后一行输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; . <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> <span class="comment"># This loads nvm</span></span><br></pre></td></tr></table></figure>

<p>如果你发现文件中已经存在了上面这行代码，就不用往里面加了。这一步的作用是每次新打开一个 bash，nvm 都会被自动添加到环境变量中。</p>
<p>最后，输入 <code>source ~/.bash_profile</code>重启环境变量的配置。</p>
<p>PS：NVM 现在已经不支持 Homebrew 的方式来安装了。</p>
<p>参考链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a3f8778bc0a1">https://www.jianshu.com/p/a3f8778bc0a1</a></p>
<p><strong>2、验证：</strong>(在 终端命令行中输入命令)</p>
<p>（1）输入 <code>nvm</code> 命令查看环境变量是否配置成功：</p>
<p>（2）输入 <code>nvm ls</code>，查看已安装的所有 node 版本。</p>
<p>（3）输入 <code>nvm -v</code>，查看 已安装的 nvm 版本。</p>
<p>（4）输入 <code>node -v</code>，查看正在使用的 node 版本。</p>
<p><strong>3、安装指定版本的 Node.js</strong>：</p>
<p>和 Windows 下一样，也是执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvm install 版本号</span><br><span class="line"></span><br><span class="line"><span class="comment"># 举例</span></span><br><span class="line">nvm install 8.10.0</span><br></pre></td></tr></table></figure>

<p>网速有点慢，要稍等。</p>
<p><img src="http://img.smyhvae.com/20180302_2148.png"></p>
<p>输入 <code>node -v</code>，查看当前使用的 node 版本。</p>
<p>安装好 <code>Node</code> 之后，<code>npm</code> 也会自动安装的，输入 <code>npm -v</code>，查看 npm 的版本。</p>
<p>关于 NVM 的常用命令，详见下一段。</p>
<h2 id="NVM-的常用命令"><a href="#NVM-的常用命令" class="headerlink" title="NVM 的常用命令"></a>NVM 的常用命令</h2><blockquote>
<p>注意，这一段说的是 NVM 的常用命令，不是 Node 的常用命令。</p>
</blockquote>
<p>查看当前使用的 nvm 版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm --version</span><br></pre></td></tr></table></figure>

<p>查看本地安装的所有的 Node.js 版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式1</span></span><br><span class="line">nvm ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式2</span></span><br><span class="line">nvm list</span><br></pre></td></tr></table></figure>

<p><strong>安装指定版本的 Node.js：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvm install 版本号</span><br><span class="line"></span><br><span class="line"><span class="comment"># 举例</span></span><br><span class="line">nvm install 8.10.0</span><br></pre></td></tr></table></figure>

<p>卸载指定版本 Node.js：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm uninstall 版本号</span><br></pre></td></tr></table></figure>

<p><strong>切换使用指定版本的 node</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 版本号</span><br></pre></td></tr></table></figure>

<p><strong>设置node的默认版本</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">alias</span> default 版本号</span><br></pre></td></tr></table></figure>


<p><strong>查看全局npm包的安装路径</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm root -g</span><br></pre></td></tr></table></figure>


<p>查看远程服务器端的所有 Node 版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote</span><br></pre></td></tr></table></figure>

<p>执行上面的命令后，在列出的版本清单中，凡是用 <code>Latest LTS</code>标注的版本，则表明是<strong>长期维护</strong>的版本。我们在安装时，建议安装这些版本。当然，我们也可以在网址 <a target="_blank" rel="noopener" href="https://nodejs.org/en/download/releases/">https://nodejs.org/en/download/releases/</a> 查看 LTS 的历史版本。</p>
<h2 id="Node-js-的常用命令"><a href="#Node-js-的常用命令" class="headerlink" title="Node.js 的常用命令"></a>Node.js 的常用命令</h2><p>查看 node 的版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br></pre></td></tr></table></figure>

<p>执行脚本字符串：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node -e <span class="string">&#x27;console.log(&quot;Hello World&quot;)&#x27;</span></span><br></pre></td></tr></table></figure>

<p>运行脚本文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ node index.js</span><br><span class="line"></span><br><span class="line">$ node path/index.js</span><br><span class="line"></span><br><span class="line">$ node path/index</span><br></pre></td></tr></table></figure>

<p>查看帮助：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node --<span class="built_in">help</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>进入 REPL 环境：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node</span><br></pre></td></tr></table></figure>

<p>REPL 的全称：Read、Eval、 Print、Loop。类似于浏览器的控制台。</p>
<p><img src="http://img.smyhvae.com/20180301_1900.png"></p>
<p>如果要退出 REPL 环境，可以输入<code>.exit</code> 或 <code>process.exit()</code>。</p>
<p>在 VS Code 里，我们可以在菜单栏选择“帮助-&gt;切换开发人员工具”，打开 console 控制台。</p>
<h2 id="包和-NPM"><a href="#包和-NPM" class="headerlink" title="包和 NPM"></a>包和 NPM</h2><h3 id="什么是包"><a href="#什么是包" class="headerlink" title="什么是包"></a>什么是包</h3><p>由于 Node 是一套轻内核的平台，虽然提供了一系列的内置模块，但是不足以满足开发者的需求，于是乎出现了包（package）的概念：<br>与核心模块类似，就是将一些预先设计好的功能或者说 API 封装到一个文件夹，提供给开发者使用。</p>
<p>Node 本身并没有太多的功能性 API，所以市面上涌现出大量的第三方人员开发出来的 Package。</p>
<h3 id="包的加载机制"><a href="#包的加载机制" class="headerlink" title="包的加载机制"></a>包的加载机制</h3><p>如果 Node 中自带的包和第三方的包名冲突了，该怎么处理呢？原则是：</p>
<ul>
<li><p>  先在系统核心（优先级最高）的模块中找；</p>
</li>
<li><p>  然后到当前项目中 node_modules 目录中找。</p>
</li>
</ul>
<p>比如说：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requiere(<span class="string">`fs`</span>);</span><br></pre></td></tr></table></figure>

<p>那加载的肯定是系统的包。所以，我们尽量不要创建一些和现有的包重名的包。</p>
<h3 id="NPM-的概念"><a href="#NPM-的概念" class="headerlink" title="NPM 的概念"></a>NPM 的概念</h3><p><strong>NPM</strong>：Node Package Manager。官方链接： <a target="_blank" rel="noopener" href="https://www.npmjs.com/">https://www.npmjs.com/</a></p>
<p>Node.js 发展到现在，已经形成了一个非常庞大的生态圈。包的生态圈一旦繁荣起来，就必须有工具去来管理这些包。NPM 应运而生。</p>
<p>举个例子，当我们在使用 Java 语言做开发时，需要用到 JDK 提供的内置库，以及第三方库。同样，在使用 JS 做开发时，我们可以使用 NPM 包管理器，方便地使用成熟的、优秀的第三方框架，融合到我们自己的项目中，极大地加速日常开发的构建过程。</p>
<p>随着时间的发展，NPM 出现了两层概念：</p>
<ul>
<li><p>  一层含义是 Node 的开放式模块登记和管理系统，亦可以说是一个生态圈，一个社区。</p>
</li>
<li><p>  另一层含义是 Node 默认的模块管理器，是一个命令行下的软件，用来安装和管理 Node 模块。</p>
</li>
</ul>
<h3 id="NPM-的安装（不需要单独安装）"><a href="#NPM-的安装（不需要单独安装）" class="headerlink" title="NPM 的安装（不需要单独安装）"></a>NPM 的安装（不需要单独安装）</h3><p>NPM 不需要单独安装。默认在安装 Node 的时候，会连带一起安装 NPM：</p>
<p><img src="http://img.smyhvae.com/20180302_1105.png"></p>
<p>NVM、Node、NPM 安装之后，目录分布如下：</p>
<p><img src="http://img.smyhvae.com/20180302_1134.png"></p>
<p><img src="http://img.smyhvae.com/20180302_1137.png"></p>
<p><img src="http://img.smyhvae.com/20180302_1138.png"></p>
<p>输入 <code>npm -v</code>，查看 npm 的版本：</p>
<p><img src="http://img.smyhvae.com/20180302_1139.png"></p>
<p>如果上方命令无效，可能是之前的 node 并没有完全安装成功。解决办法：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000011114680">https://segmentfault.com/a/1190000011114680</a></p>
<p>另外，Node 附带的 NPM 可能不是最新版本，可以用下面的命令，更新到最新版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install npm -g</span><br></pre></td></tr></table></figure>

<h3 id="配置-NPM-的全局目录（暂略）"><a href="#配置-NPM-的全局目录（暂略）" class="headerlink" title="配置 NPM 的全局目录（暂略）"></a>配置 NPM 的全局目录（暂略）</h3><p>NPM 默认安装到当前正在使用 Node 版本所在目录下。我们建议重新配置 NPM 的全局目录。</p>
<p>输入<code>npm config ls</code>，查看：</p>
<p><img src="http://img.smyhvae.com/20180302_1210.png"></p>
<h2 id="NPM-的常用命令"><a href="#NPM-的常用命令" class="headerlink" title="NPM 的常用命令"></a>NPM 的常用命令</h2><p>查看 npm 当前版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure>

<p>更新 npm：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install npm@latest -g</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>项目初始化：（执行完成后，会生成<code>package.json</code>文件）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 快速跳过问答式界面，选择默认配置</span></span><br><span class="line">npm init --yes</span><br></pre></td></tr></table></figure>

<p>只在当前工程下安装指定的包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install [package]</span><br></pre></td></tr></table></figure>

<p>在全局安装指定的包：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g [package]</span><br></pre></td></tr></table></figure>

<p>安装的包只用于开发环境，不用于生产环境：（会出现在 package.json 文件中的 devDependencies 属性中）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install [package] --save-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">npm install [package] -D</span><br></pre></td></tr></table></figure>

<p>安装的包需要发布到生产环境：（会出现在 package.json 文件中的 dependencies 属性中）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install [package] --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">npm install [package] -S</span><br></pre></td></tr></table></figure>

<p>查看当前目录下已安装的 node 包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm list</span><br></pre></td></tr></table></figure>

<p>查看全局已经安装的 node 包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm list -g</span><br></pre></td></tr></table></figure>

<p>查看 npm 帮助命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<p>查看指定命令的帮助：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm [指定命令] --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<p>更新指定的包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update [package]</span><br></pre></td></tr></table></figure>

<p>卸载指定的包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall [package]</span><br></pre></td></tr></table></figure>

<p>查看配置信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config list</span><br></pre></td></tr></table></figure>

<p>查看本地安装的指定包的信息，没有则显示 empty：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm ls [package]</span><br></pre></td></tr></table></figure>

<p>查看全局安装的指定包的信息，没有则显示 empty：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm ls [package] -g</span><br></pre></td></tr></table></figure>

<p>查看远程 npm 上指定包的所有版本信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm info [package]</span><br></pre></td></tr></table></figure>

<p>查看当前包的安装路径：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm root</span><br></pre></td></tr></table></figure>

<p>查看全局包的安装路径：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm root -g</span><br></pre></td></tr></table></figure>

<h2 id="配置-npm-镜像源"><a href="#配置-npm-镜像源" class="headerlink" title="配置 npm 镜像源"></a>配置 npm 镜像源</h2><p>由于 npm 默认的下载地址在国外（npmjs.com），有时候会被墙，导致无法下载或者下载很慢。因此，我们可以尝试切换成，从其他的镜像源下载 npm 包。</p>
<p>切换镜像源，有下面这几种方式：</p>
<ul>
<li><p>  方式 1：临时切换镜像源。</p>
</li>
<li><p>  方式 2：切换镜像源</p>
</li>
<li><p>  方式 3：通过 NRM 切换镜像源（最为推荐的方式）。</p>
</li>
<li><p>  方式 4：cnpm。</p>
</li>
</ul>
<p>下面来分别讲一下。</p>
<h3 id="方式-1：临时切换镜像源"><a href="#方式-1：临时切换镜像源" class="headerlink" title="方式 1：临时切换镜像源"></a>方式 1：临时切换镜像源</h3><p>安装指定包的时候，通过追加 <code>--registry</code>参数即可。格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式</span></span><br><span class="line">npm install [package] --registry [https://xxx]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 举例：在下载安装 express 这个包的时候，临时指定镜像源为 https://registry.npm.taobao.org</span></span><br><span class="line">npm install express --registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<h3 id="方式-2：切换镜像源"><a href="#方式-2：切换镜像源" class="headerlink" title="方式 2：切换镜像源"></a>方式 2：切换镜像源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>执行上述命令后，以后下载所有 npm 包的时候，都会改为使用淘宝的镜像源。</p>
<h3 id="方式-3：通过-NRM-切换镜像源（推荐）"><a href="#方式-3：通过-NRM-切换镜像源（推荐）" class="headerlink" title="方式 3：通过 NRM 切换镜像源（推荐）"></a>方式 3：通过 NRM 切换镜像源（推荐）</h3><p><strong>NRM</strong>：Node Registry Manager。作用是：<strong>切换和管理 npm 包的镜像源</strong>。</p>
<ul>
<li><p>  项目地址：<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/nrm">https://www.npmjs.com/package/nrm</a></p>
</li>
<li><p>  GitHub 地址： <a target="_blank" rel="noopener" href="https://github.com/Pana/nrm">https://github.com/Pana/nrm</a></p>
</li>
</ul>
<p><strong>安装 NRM</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm</span><br></pre></td></tr></table></figure>

<p><img src="http://img.smyhvae.com/20180302_1208.png"></p>
<p><strong>NRM 的常用命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示全部的镜像</span></span><br><span class="line">nrm ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用淘宝的镜像</span></span><br><span class="line">nrm use taobao</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="http://img.smyhvae.com/20180302_1215.png"></p>
<p>推荐的国内加速镜像淘宝：<a target="_blank" rel="noopener" href="https://npm.taobao.org/">https://npm.taobao.org/</a></p>
<h2 id="方式-4：安装-cnpm"><a href="#方式-4：安装-cnpm" class="headerlink" title="方式 4：安装 cnpm"></a>方式 4：安装 cnpm</h2><ul>
<li>  项目地址：<a target="_blank" rel="noopener" href="https://npm.taobao.org/">https://npm.taobao.org/</a></li>
</ul>
<p>安装<code>cnpm</code>替换 npm（npm 由于源服务器在国外，下载包的速度较慢，cnpm 会使用国内镜像）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p><img src="http://img.smyhvae.com/20180302_2204.png"></p>
<p>以后我们就可以通过 cnpm 命令去安装一个包。举例如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 vue 这个包</span></span><br><span class="line">cnpm install vue</span><br></pre></td></tr></table></figure>

<p>这里的单词 <code>install</code> 可以简写成 <code>i</code>。</p>
<h2 id="Node-js-的简单使用"><a href="#Node-js-的简单使用" class="headerlink" title="Node.js 的简单使用"></a>Node.js 的简单使用</h2><p>我们可以输入<code>node</code>命令，然后在里面写 js 的代码。</p>
<p>或者，也可以 通过 node 运行 指定的 js 文件。比如，编写好一个 js 文件<code>01.js</code>，然后在命令行输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node 01.js</span><br></pre></td></tr></table></figure>

<p>就可以执行这个 js 程序，直接在命令行查看运行结果。</p>
<h2 id="我的公众号"><a href="#我的公众号" class="headerlink" title="我的公众号"></a>我的公众号</h2><p>想学习<strong>更多技能</strong>？不妨关注我的微信公众号：<strong>千古壹号</strong>（id：<code>qianguyihao</code>）。</p>
<p>扫一扫，你将发现另一个全新的世界，而这将是一场美丽的意外：</p>
<p><img src="https://img.smyhvae.com/20200102.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/02-Node.js%E7%9A%84%E7%89%B9%E7%82%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/11-Node.js/02-Node.js%E7%9A%84%E7%89%B9%E7%82%B9/" itemprop="url">02-Node.js的特点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="Node-js-的特点"><a href="#Node-js-的特点" class="headerlink" title="Node.js 的特点"></a>Node.js 的特点</h2><ul>
<li><p>  异步、非阻塞 IO 模型</p>
</li>
<li><p>  事件循环</p>
</li>
<li><p>  单线程</p>
</li>
<li><p>  总结：轻量和高效</p>
</li>
</ul>
<p>Node.js 的性能和效率非常高。</p>
<p>传统的 Java 语言是一个请求开启一个线程，当请求处理完毕后就关闭这个线程。而 Node.js 则完全没有采用这种模型，它本质上就是一个单线程。</p>
<p>你可能会疑问：一个线程如何服务于大量的请求、如何处理高并发的呢？这是因为，Node.js 采用的是异步的、非阻塞的模型。</p>
<p>这里所谓的“单线程”，指的是 Node 的主线程只有一个。为了确保主线程不被阻塞，主线程是用于接收客户端请求。但不会处理具体的任务。而 Node 的背后还有一个线程池，线程池会处理长时间运行的任务（比如 IO 操作、网络操作）。线程池里的任务是通过队列和事件循环的机制来执行。</p>
<h2 id="使用-Node-js-时的劣势"><a href="#使用-Node-js-时的劣势" class="headerlink" title="使用 Node.js 时的劣势"></a>使用 Node.js 时的劣势</h2><ul>
<li><p>程序运行不稳定，可能会出现服务不可用的情况</p>
</li>
<li><p>程序运行效率较低，每秒的请求数维持在一个较低的水平</p>
</li>
<li><p>前端同学对服务器端的技术不太熟悉。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/01-Node.js%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/11-Node.js/01-Node.js%E4%BB%8B%E7%BB%8D/" itemprop="url">01-Node.js介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="todo"><a href="#todo" class="headerlink" title="todo"></a>todo</h2><ul>
<li><p>  rpc 和 Node.js 的关系</p>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/uWeAsJ-P253je15A49uKIQ">《吊打面试官》系列 Node.js 全栈秒杀系统</a></p>
</li>
</ul>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Node 的重要性已经不言而喻，很多互联网公司都已经有大量的高性能系统运行在 Node 之上。Node 凭借其单线程、异步等举措实现了极高的性能基准。此外，目前最为流行的 Web 开发模式是前后端分离的形式，即前端开发者与后端开发者在自己喜欢的 IDE 上独立进行开发，然后通过 HTTP 或是 RPC 等方式实现数据与流程的交互。这种开发模式在 Node 的强大功能的引领下变得越来越高效，也越来越受到各个互联网公司的青睐。</p>
<h3 id="前端同学为什么要学习后端-后端同学为什么要学习前端"><a href="#前端同学为什么要学习后端-后端同学为什么要学习前端" class="headerlink" title="前端同学为什么要学习后端/后端同学为什么要学习前端"></a>前端同学为什么要学习后端/后端同学为什么要学习前端</h3><ul>
<li><p>  了解前后端交互流程。</p>
</li>
<li><p>  前端同学能够和后台开发的程序员更佳紧密地结合、更顺畅地沟通。</p>
</li>
<li><p>  当网站的业务逻辑需要前置时，前端人员需要学习一些后台开发的技术，以完成相应的任务；；反过来也一样。</p>
</li>
<li><p>  拓宽知识视野和技术栈，能够站在全局的角度审视整个项目。</p>
</li>
</ul>
<h3 id="前端同学为什么要学-Node-js"><a href="#前端同学为什么要学-Node-js" class="headerlink" title="前端同学为什么要学 Node.js"></a>前端同学为什么要学 Node.js</h3><p>1、Node.js 使用 JavaScript 语言开发服务器端应用，<strong>便于前端同学上手</strong>（一些公司甚至要求前端工程师掌握 Node.js 开发）。</p>
<p>2、实现了前后端的语法统一，<strong>有利于和前端代码整合</strong>，甚至共用部分代码。</p>
<p>比如说，针对接口返回的各种字段，前后端都必须要做校验。此时，如果用 Node.js 来做后台开发的话，前后端可以共用校验的代码。</p>
<p>3、Node.js 性能高、生态系统活跃，提供了大量的开源库。</p>
<p>4、Jeff Atwood 在 2007 年提出了著名的 Atwood 定律：<strong>任何能够用 JavaScript 实现的应用系统，最终都必将用 JavaScript 实现</strong>。 Jeff Atwood 是谁不重要（他是 Stack Overflow 网站的联合创始人），重要的是这条定律。</p>
<h3 id="后端同学为什么要学-Node-js"><a href="#后端同学为什么要学-Node-js" class="headerlink" title="后端同学为什么要学 Node.js"></a>后端同学为什么要学 Node.js</h3><p>因为前端同学在学 Node.js。</p>
<h2 id="什么是-Node-js"><a href="#什么是-Node-js" class="headerlink" title="什么是 Node.js"></a>什么是 Node.js</h2><h3 id="官方定义"><a href="#官方定义" class="headerlink" title="官方定义"></a>官方定义</h3><p><a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn/">Node.js</a> 是一个基于 <strong>Chrome V8 引擎</strong>的 JavaScript 运行环境。Node.js 使用了一个<strong>事件驱动</strong>、<strong>非阻塞式 I/O</strong>的模型，使其轻量又高效。Node.js 的包管理工具 npm 是全球最大的开源库生态系统。</p>
<p>Node.js 不是一门语言，也不是 JavaScript 的框架，也不是像Nginx一样的Web服务器 ，<strong>Node.js 是 JavaScript 在服务器端的运行环境（平台）</strong>。</p>
<h3 id="Node-js-的组成"><a href="#Node-js-的组成" class="headerlink" title="Node.js 的组成"></a>Node.js 的组成</h3><p>在 Node.js 里运行 JavaScript，跟在 Chrome 里运行 JavaScript 有什么不同？</p>
<p>二者采用的是同样的 JS 引擎。在 Node.js 里写 JS，和在前端写 JS，几乎没有不同。在写法上的区别在于：Node.js 没有浏览器、页面标签相关的 API，但是新增了一些 Node.js 相关的 API。通俗来说，对于开发者而言，在前端写 JS 是用于控制浏览器；而 Node.js 环境写 JS 可以控制整个计算机。</p>
<p>我们知道，JavaScript 的组成分为三个部分：</p>
<ul>
<li><p>  ECMAScript</p>
</li>
<li><p>  DOM：标签元素相关的API</p>
</li>
<li><p>  BOM：浏览器相关的API</p>
</li>
</ul>
<p>ECMAScript 是 JS 的语法；DOM 和 BOM 浏览器端为 JS 提供的 API。</p>
<p>而 Node.js 的组成分为：</p>
<ul>
<li><p>  <strong>ECMAScript</strong>。ECMAScript 的所有语法在 Node 环境中都可以使用。</p>
</li>
<li><p>  <strong>Node 环境</strong>提供的一些<strong>附加 API</strong>(包括文件、网络等相关的 API)。</p>
</li>
</ul>
<p>如下图所示：</p>
<p><img src="http://img.smyhvae.com/20200409_1545.png"></p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>与 PHP、JSP、Python、Perl、Ruby 的“既是语言，也是平台”不同，Node.js 的使用 JavaScript 进行编程，运行在 Chrome 的 V8 引擎上。</p>
<p>与 PHP、JSP 等相比（PHP、JSP、.net 都需要运行在服务器程序上，Apache、Nginx、Tomcat、IIS。<br>），Node.js 跳过了 Apache、Nginx、IIS 等 HTTP 服务器，它自己不用建设在任何服务器软件之上。Node.js 的许多设计理念与经典架构（LAMP = Linux + Apache + MySQL + PHP）有着很大的不同，可以提供强大的伸缩能力。Node.js 没有 web 容器。</p>
<p>JS 语言非常灵活，使得它在严谨性方面不如 Java 等传统的静态语言。JS 是一门动态语言，而且融合了面向对象和函数式编程这两种编程范式。</p>
<p>随着 ES6、ES7 等 JS 语法规范的出现，以及浏览器对这些规范的支持，使得我们可以用更为现代化的 JS 语言特性，来编写现代化的应用。</p>
<h2 id="Node-js-的架构和依赖"><a href="#Node-js-的架构和依赖" class="headerlink" title="Node.js 的架构和依赖"></a>Node.js 的架构和依赖</h2><p>Node.js 的架构如下：</p>
<p><img src="http://img.smyhvae.com/20180301_1540.png"></p>
<p>Node.js 内部采用 Google Chrome 的 V8 引擎，作为 JavaScript 语言解释器；同时结合自行开发的 libuv 库，<strong>扩展了 JS 在后端的能力（比如 I/O 操作、文件读写、数据库操作等）</strong>。使得 JS 既可以在前端进行 DOM 操作（浏览器前端），又可以在后端调用操作系统资源，是目前最简单的全栈式语言。</p>
<p>其次，Node 生态系统活跃，提供了大量的开源库，使得 JavaScript 语言能与操作系统进行更多的交互。</p>
<h3 id="Node-js-运行环境的核心：V8-引擎-和-libuv-库"><a href="#Node-js-运行环境的核心：V8-引擎-和-libuv-库" class="headerlink" title="Node.js 运行环境的核心：V8 引擎 和 libuv 库"></a>Node.js 运行环境的核心：V8 引擎 和 libuv 库</h3><p>Node.js 是 JavaScript 在服务器端的运行环境，在这个意义上，Node.js 的地位其实就是 JavaScript 在服务器端的虚拟机，类似于 Java 语言中的 Java 虚拟机。</p>
<ul>
<li><p>  <a target="_blank" rel="noopener" href="https://v8.dev/">V8 引擎</a> ：编译和执行 JS 代码、管理内存、垃圾回收。V8 给 JS 提供了运行环境，可以说是 JS 的虚拟机。V8 引擎本身是用 C++ 写的。</p>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Libuv">libuv</a>： libuv 是一个专注于异步 I/O 的跨平台类库，目前主要在 Node.js 上使用。它是 Node.js 最初的作者 Ryan Dahl 为 Node.js 写的底层类库，也可以称之为虚拟机。libuv 本身是用 C 写的。</p>
</li>
</ul>
<h3 id="Java-虚拟机和-V8-引擎，是由同一人开发"><a href="#Java-虚拟机和-V8-引擎，是由同一人开发" class="headerlink" title="Java 虚拟机和 V8 引擎，是由同一人开发"></a>Java 虚拟机和 V8 引擎，是由同一人开发</h3><p>Chrome 浏览器成功的背后，离不开 JS 的 V8 引擎。作为虚拟机，V8 的性能表现优异，它的开发者是 Lars Bak。在 Lars 的工作履历里，绝大部分都是与虚拟机相关的工作。在开发 V8 之前，他曾经在 Sun 公司工作，担任 HotSpot 团队的技术领导，主要致力于开发高性能的 Java 虚拟机。在这之前，他也曾为 Self、Smalltalk 语言开发过高性能虚拟机。这些无与伦比的经历让 V8 一出世就超越了当时所有的 JS 虚拟机。</p>
<p><img src="http://img.smyhvae.com/20200617_1120.png"></p>
<p>V8 的性能优势使得用 JavaScript 写高性能后台服务程序成为可能。在这样的契机下，Ryan Dahl 选择了 JavaScript，选择了 V8，在事件驱动、非阻塞 I/O 模型的设计下实现了 Node。</p>
<h3 id="V8-的内存限制"><a href="#V8-的内存限制" class="headerlink" title="V8 的内存限制"></a>V8 的内存限制</h3><p>在一般的后端开发语言中，在基本的内存使用上没有什么限制，然而在 Node 中通过 JavaScript 使用内存时就会发现只能使用部分内存（64 位系统下约为 1.4GB，32 位系统下约为 0.7GB）。在这样的限制下，将会导致 Node 无法直接操作大内存对象。</p>
<p>造成这个问题的主要原因在于 Node 基于 V8 构建，所以在 Node 中使用的 JavaScript 对象基本上都是通过 V8 自己的方式来进行分配和管理的。V8 的这套内存管理机制在浏览器的应用场景下使用起来绰绰有余，足以胜任前端页面中的所有需求。但在 Node 中，这却限制了开发者随心所欲使用大内存的想法。</p>
<h2 id="Node-的发展历史"><a href="#Node-的发展历史" class="headerlink" title="Node 的发展历史"></a>Node 的发展历史</h2><ul>
<li><p>  2008 年左右，随着 Ajax 的逐渐普及，Web 开发逐渐走向复杂化，系统化；</p>
</li>
<li><p>  Node.js 诞生于 2009 年，由 Joyent 的员工 Ryan Dahl 开发而成。2009 年 5 月，Ryan Dahl 在 GitHub 中开源了 Node 的最初版本，同年 11 月，在 JSConf 大会上展示了 Node 项目；</p>
</li>
<li><p>  2010 年 1 月，NPM 包管理工具诞生，使得程序员能够更方便地发布和分享 Node.js 的第三方库。</p>
</li>
<li><p>  Node.js 最初只支持 Linux 和 Mac OS 操作系统。2011 年 7 月，微软参与合作，Node.js 终于支持了 Windows 平台。PS：不过，node 的生产环境基本是在 Linux 下。</p>
</li>
<li><p>  目前官网最新版本已经更新到 14.x.x 版本，最新稳定的是 12.18.0。</p>
</li>
</ul>
<p>据 Node.js 创始人 Ryan Dahl 回忆，他最初希望采用 Ruby，但是 Ruby 的虚拟机效率不行。</p>
<p>注意：是 Node 选择了 JavaScript，不是 JavaScript 发展出来了一个 Node。</p>
<h2 id="Node-js-的应用"><a href="#Node-js-的应用" class="headerlink" title="Node.js 的应用"></a>Node.js 的应用</h2><p>Node.js 拥有强大的开发者社区，现在已经发展出比较成熟的技术体系，以及庞大的生态。它被广泛地应用在 Web 服务、开发工作流、客户端应用等诸多领域。其中，在 <strong>Web 服务</strong>领域，业界对 Node.js 的接受程度最高。</p>
<h3 id="1、BFF-中间层"><a href="#1、BFF-中间层" class="headerlink" title="1、BFF 中间层"></a>1、BFF 中间层</h3><p>BFF，即 Backend For Frontend（服务于前端的后端）。玉伯在《<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/IYddaaw2ps1wR2VT1dZWPg">从前端技术进化到体验科技</a>》这篇文章中点出了 BFF 层的概念：</p>
<blockquote>
<p>BFF 模式下，整体分工很清晰，<strong>后端通过 Java/C++ 等语言负责服务实现，理想情况下给前端提供的是基于领域模型的 RPC 接口，前端则在 BFF 层直接调用服务端 RPC 接口拿到数据</strong>，按需加工消费数据，并实现人机交互。基于 BFF 模式的研发，很适合拥有前端技术背景的全栈型工程师。这种模式的好处很明显，后端可以专注于业务领域，更多从领域模型的视角去思考问题，页面视角的数据则交给前端型全栈工程师去搞定。<strong>领域模型与页面数据是两种思维模式，通过 BFF 可以很好地解耦开，让彼此更专业高效</strong>。</p>
</blockquote>
<p>在 Web 服务里，搭建一个中间层，前端访问中间层的接口，中间层再访问后台的 Java/C++ 服务。这类服务的特点是不需要太强的服务器运算能力，但对程序的灵活性有较高的要求。这两个特点，正好和 Node.js 的优势相吻合。Node.js 非常适合用来做 BFF 层，优势如下：</p>
<ul>
<li><p>  对于前端来说：让前端<strong>有能力自由组装后台数据</strong>，这样可以减少大量的业务沟通成本，加快业务的迭代速度；并且，前端同学能够<strong>自主决定</strong>与后台的通讯方式。</p>
</li>
<li><p>  对于后台和运维来说，好处是：安全性（不会把主服务器暴露在外面）、降低主服务器的复杂度等。</p>
</li>
</ul>
<h3 id="2、服务端渲染"><a href="#2、服务端渲染" class="headerlink" title="2、服务端渲染"></a>2、服务端渲染</h3><p><strong>客户端渲染</strong>（CSR / Client side render）：前端通过一大堆接口请求数据，然后通过 JS 动态处理和生成页面结构和展示。优点是<strong>前后端分离</strong>、减小服务器压力、局部刷新。缺点是不利于 SEO（如果你的页面然后通过 Ajax 异步获取内容，抓取工具并不会等待异步完成后再行抓取页面内容）、首屏渲染慢。</p>
<p><strong>服务端渲染</strong>（SSR / Server Side Render）：服务器返回的不是接口数据，而是一整个页面（或整个楼层）的 HTML 字符串，浏览器直接显示即可。也就是说，在服务器端直接就渲染好了，然后一次性打包返回给前端。优点是<strong>有利于 SEO、首屏渲染很快</strong>。</p>
<p><strong>总结： 搜索引擎优化 + 首屏速度优化 = 服务端渲染</strong>。</p>
<p>备注：这里的「服务端渲染」只是让 Node.js 做中间层，不会替代后端的，后台同学请放心。</p>
<p>参考链接：</p>
<ul>
<li><p>  <a target="_blank" rel="noopener" href="https://ssr.vuejs.org/zh/">Vue 服务端渲染的概念</a></p>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/u012036171/article/details/88833200">https://blog.csdn.net/u012036171/article/details/88833200</a></p>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://juejin.im/post/5c068fd8f265da61524d2abc">https://juejin.im/post/5c068fd8f265da61524d2abc</a></p>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/59578433/answer/326694511">方应杭</a></p>
</li>
</ul>
<p>历史回顾：</p>
<p>（1）一开始，页面很简单，html 是后端渲染的（比如PHP、ASP、JSP等方式）。后端发现页面中的 js 好麻烦（虽然简单，但是坑多），于是让公司招聘专门写 js 的人，简称「前端切图仔」。</p>
<p>（2）随着 Node.js 和前端 MVC 的兴起，以及前端越来越复杂，慢慢演变成了「前后端分离」。</p>
<p>（3）前端的 SPA 应用流行之后，发现 SEO 问题很大，而且首屏渲染速度很慢，但是自己选的路再难走也要走下去，于是用 Node.js 在服务端渲染被看成是一条出路。</p>
<p>（4）以前在一起的时候，是后端做部分前端的工作；现在在一起的时候，是前端做部分后端的工作。</p>
<h3 id="3、做小型服务、小型网站的后端（基于-Express、Koa-框架）"><a href="#3、做小型服务、小型网站的后端（基于-Express、Koa-框架）" class="headerlink" title="3、做小型服务、小型网站的后端（基于 Express、Koa 框架）"></a>3、做小型服务、小型网站的后端（基于 Express、Koa 框架）</h3><p>现在很多公司的后台管理系统，都是用 Node.js 来开发接口，毕竟，后台管理系统对性能和并发的要求不是太高。有了 Node.js 之后，通过 JS 直接操作 DB，做增删改查，生成接口，极大降低了前端同学的学习门槛。</p>
<p>当然，有时候做 Node.js 开发，是因为：后台人力不够，所以把后台开发的一部分工作量，转移给前端同学。</p>
<h3 id="4、做项目构建工具"><a href="#4、做项目构建工具" class="headerlink" title="4、做项目构建工具"></a>4、做项目构建工具</h3><p>前端正在广泛使用的构建工具 gulp、Webpack，就是基于 Node.js 来实现的。</p>
<h3 id="5、-做-PC-客户端软件（基于-Electron-框架）"><a href="#5、-做-PC-客户端软件（基于-Electron-框架）" class="headerlink" title="5、 做 PC 客户端软件（基于 Electron 框架）"></a>5、 做 PC 客户端软件（基于 Electron 框架）</h3><p>Electron 框架就是基于 Node.js 的，可以用来开发客户端软件。</p>
<p>Electron 原名为 Atom Shell，是由 GitHub 开发的一个开源框架。Electron 以 Node.js 作为运行时（runtime），以  chromium 作为渲染引擎，使开发者可以使用 JS 这种前端技术栈开来发跨平台的桌面GUI应用程序。</p>
<p>有一点你可能会感到惊讶：程序员们都在用的代码编辑器 VS Code 软件， 就是基于 Electron 框架来开发的。其他使用 Electron 进行开发的知名应用还有：Skype、GitHub Desktop、Slack、WhatsApp等。</p>
<p>还有一个例子是：电子游戏直播网站 <a target="_blank" rel="noopener" href="https://www.twitch.tv/">Twitch</a>，号称是国外游戏直播的鼻祖，它在 PC 端的客户端软件，就是用 Electron 框架的。你会发现，Twitch 的网站视觉，和 PC 端的视觉，几乎是一样的。如果两端都采用 JS 语言，就可以极大的复用现有的工程。</p>
<h3 id="知名度较高的-Node-js-开源项目"><a href="#知名度较高的-Node-js-开源项目" class="headerlink" title="知名度较高的 Node.js 开源项目"></a>知名度较高的 Node.js 开源项目</h3><p><img src="http://img.smyhvae.com/20180301_2009.png"></p>
<ul>
<li><p>  express：Node.js 中著名的 web 服务框架。</p>
</li>
<li><p>  Koa：下一代的 Node.js 的 Web 服务框架。所谓的“下一代”是相对于 Express 而言的。</p>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://eggjs.org/zh-cn/">Egg</a>：2016 年，阿里巴巴研发了知名的 Egg.js 开源项目，号称企业级 Web 服务框架。Egg.js 是基于 Koa 开发的。</p>
</li>
</ul>
<ul>
<li><p>  mocha：是现在最流行的 JavaScript 测试框架，在浏览器和 Node 环境都可以使用。</p>
</li>
<li><p>  PM2：node 多进程管理。</p>
</li>
<li><p>  jade：非常优秀的模板引擎，不仅限于 js 语言。</p>
</li>
<li><p>  CoffeeScript：用简洁的方式展示 JavaScript 优秀的部分。</p>
</li>
<li><p>  Atom：编辑器。</p>
</li>
<li><p>  VS Code：最酷炫的编辑器。</p>
</li>
<li><p>  socket.io：实时通信框架。</p>
</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>或许，能用 Node.js 做的后台应用，Java/C++ 也能做；但是 Node.js 可以让我们多一种选择。</p>
<p>短期来看，Node.js 很难像 Java/C++ 那样，成为后台的主力开发语言。这并非是因为 Node.js 的性能问题，主要是因为，Node.js 还比较年轻，经验积累太少，框架的支持度不够。搞企业级服务，Node.js 敌不过 Java/C++，所以目前只能搞「轻量级」；但未来可期。</p>
<p>限制语言能力的不是语言本身，而是生态。</p>
<h2 id="最后一段：前端同学会-Node-js-就真的全栈了吗？"><a href="#最后一段：前端同学会-Node-js-就真的全栈了吗？" class="headerlink" title="最后一段：前端同学会 Node.js 就真的全栈了吗？"></a>最后一段：前端同学会 Node.js 就真的全栈了吗？</h2><p>一个人的精力是有限的，既擅长前端、又精通后端的人，毕竟是极少数。</p>
<p>林肯说过：“你可以在所有的时间欺骗一部分人，也可以在一段时间欺骗所有的人，但你不可能在所有的时间欺骗所有的人”。</p>
<p>同样的，我也说过：“你可以在这一段时间擅长前端技术，也可以在另一段时间擅长后台技术，但你不可能在<strong>同一段时间</strong>同时擅长前端和后台，更不可能在<strong>所有的时间</strong>同时擅长前端和后台。”</p>
<p>所谓的全栈，只是一个伪命题。个人不一定需要全栈，企业和项目也不强制要求全栈，分工协作，才最高效。</p>
<p>对于个人而言，虽然全栈很难，但是 Node.js 的出现，<strong>让 JS 语言实现了前后端语法的统一，让 JS 语言的技术栈更佳全面</strong>。</p>
<p>涉及到后台开发相关的技术，无论如何，也绕不开<strong>框架设计、开发调试、数据库操作、高并发处理、大规模存储、性能优化、容灾方案、RPC 调用、进程管理、操作系统调度、网络安全、系统运维、日常维护、甚至是 Linux 内核、驱动开发</strong>等过硬的知识技能和经验积累。等你亲身经历过这些，才算明白：语言只是一种工具。</p>
<h2 id="我的公众号"><a href="#我的公众号" class="headerlink" title="我的公众号"></a>我的公众号</h2><p>想学习<strong>更多技能</strong>？不妨关注我的微信公众号：<strong>千古壹号</strong>（id：<code>qianguyihao</code>）。</p>
<p>扫一扫，你将发现另一个全新的世界，而这将是一场美丽的意外：</p>
<p><img src="https://img.smyhvae.com/20200102.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BA%8B%E5%8A%A1/" itemprop="url">01-Bootstrap入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:25+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="事务语句"><a href="#事务语句" class="headerlink" title="事务语句"></a>事务语句</h2><ul>
<li><p>开启：begin</p>
</li>
<li><p>提交：commit</p>
</li>
<li><p>回滚：rollback</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E8%AE%BE%E8%AE%A1%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E8%AE%BE%E8%AE%A1%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/" itemprop="url">01-Bootstrap入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:25+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>范式即规范。MySQL 范式的作用是：</p>
<ul>
<li><p>让我们建的表更佳简洁和高效。</p>
</li>
<li><p>让功能独立化，避免耦合。</p>
</li>
</ul>
<h2 id="MySQL-设计三大范式"><a href="#MySQL-设计三大范式" class="headerlink" title="MySQL 设计三大范式"></a>MySQL 设计三大范式</h2><h3 id="第一范式（1NF）：原子性"><a href="#第一范式（1NF）：原子性" class="headerlink" title="第一范式（1NF）：原子性"></a>第一范式（1NF）：原子性</h3><p>表的每一列具有原子性，不可再分。</p>
<h3 id="第二范式：唯一性"><a href="#第二范式：唯一性" class="headerlink" title="第二范式：唯一性"></a>第二范式：唯一性</h3><p>第二范式是建立在第一范式基础上的；外要求所有非主键字段必须完全依赖主键，而不是部分依赖。</p>
<h3 id="第三范式"><a href="#第三范式" class="headerlink" title="第三范式"></a>第三范式</h3><p>第三范式是建立在第二范式基础上的；且要求没有传递依赖。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/3e97c2a1687b">MySql–数据库设计三范式</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/05-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/05-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" itemprop="url">05-MySQL数据库的常用命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:25+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="MySQL-的一些简单命令"><a href="#MySQL-的一些简单命令" class="headerlink" title="MySQL 的一些简单命令"></a>MySQL 的一些简单命令</h2><p>我们可以在 Navicat Premium 软件中，创建数据库和表，然后输入查询命令来查询数据。选择菜单栏「查询-&gt;新建查询-&gt;输入 sql 命令-&gt;运行」即可，效果如下：</p>
<p><img src="https://github.com/qianguyihao/Web/blob/master/img/20200417_1750.png"></p>
<p>我们还可以直接在终端输入命令行来操作。</p>
<p>注意，在 Mac 终端执行 sql 命令时，命令的末尾必须加上<code>;</code>（英文格式的分号）。效果如下：</p>
<p><img src="https://github.com/qianguyihao/Web/blob/master/img/20200417_1700.png"></p>
<p>MySQL 命令行的一些简单命令如下。</p>
<p><strong>以 root 身份进入命令行</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<p><strong>查看有哪些数据库</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure>

<p><strong>选择进入指定的数据库</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use xxx_database;</span><br><span class="line"></span><br><span class="line"># 举例</span><br><span class="line">use qianguyihao_database;</span><br></pre></td></tr></table></figure>

<p><strong>在当前数据库中，查看有哪些表</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure>

<p><strong>在当前数据库中，查询指定表的全部数据</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> xxx_table;</span><br><span class="line"></span><br><span class="line"># 举例</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> qianguyihao_student_table</span><br></pre></td></tr></table></figure>

<p><strong>删除指定的表</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> xxx;</span><br><span class="line"></span><br><span class="line"># 举例</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> qianguyihao_student_table;</span><br></pre></td></tr></table></figure>

<p><strong>删除指定的数据库</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> database qianguyihao_student_table;</span><br></pre></td></tr></table></figure>

<p><strong>创建一个数据库</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database qianguyihao_database2;</span><br></pre></td></tr></table></figure>

<h2 id="where-条件查询"><a href="#where-条件查询" class="headerlink" title="where 条件查询"></a>where 条件查询</h2><p>使用 <code>where</code> 子句可以对表中的数据进行筛选，结果为 true 的行会出现在查询结果中。</p>
<p>语法格式如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<p>上面的语法格式中，<code>条件</code> 具体要怎么写呢？这个可能有很多种情况。我们继续往下看。</p>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><ul>
<li><code>=</code> 等于</li>
<li><code>&gt;</code> 大于</li>
<li><code>&gt;=</code> 大于等于</li>
<li><code>&lt;</code> 小于</li>
<li><code>&lt;=</code> 小于等于</li>
<li><code>!=</code>：不等于</li>
<li><code>age &gt; 20</code>：查询 age 大于 30 的数据</li>
</ul>
<p><strong>举例</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询 age 大于 <span class="number">20</span> 的数据</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> qianguyihao_table <span class="keyword">WHERE</span> age <span class="operator">&gt;</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><ul>
<li><p>AND</p>
</li>
<li><p>OR</p>
</li>
<li><p>NOT</p>
</li>
</ul>
<p><strong>举例</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查询 age 在<span class="number">20</span>至<span class="number">30</span>之间的数据</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> qianguyihao_table <span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">30</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="范围查询"><a href="#范围查询" class="headerlink" title="范围查询"></a>范围查询</h3><ul>
<li><p><code>in</code> 表示在一个非连续的范围内。</p>
</li>
<li><p><code>between ... and ...</code> 表示在一个连续的范围内</p>
</li>
</ul>
<p>举例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 查询 name 为 千古壹号 或者 许嵩的数据</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> qianguyihao_table <span class="keyword">WHERE</span> name <span class="keyword">IN</span> [<span class="string">&#x27;千古壹号&#x27;</span>, <span class="string">&#x27;许嵩&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> qianguyihao_table <span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">30</span>;</span><br></pre></td></tr></table></figure>

<h3 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h3><ul>
<li><code>like</code><ul>
<li><code>%</code> 表示任意多个任意字符</li>
<li><code>_</code> 表示一个任意字符</li>
</ul>
</li>
</ul>
<p><code>%</code> 符号举例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 查询标题中包含“前端”这两个字的数据（“前端”这两个字的前后可能都有内容）</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> qianguyihao_table <span class="keyword">where</span> `title` <span class="keyword">like</span> &quot;%前端%&quot;;</span><br><span class="line"></span><br><span class="line"># 查询标题以“前端”开头的数据</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> qianguyihao_table <span class="keyword">where</span> `title` <span class="keyword">like</span> &quot;前端%&quot;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>_</code>符号举例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询标题，查询条件是：标题中至少有五个字符，而且，这五个字符中，前两个字符一定是“千古”开头的。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> qianguyihao_table <span class="keyword">WHERE</span> `title` <span class="keyword">LIKE</span> &quot;千古___&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="NULL-的判断"><a href="#NULL-的判断" class="headerlink" title="NULL 的判断"></a>NULL 的判断</h3><ul>
<li><p><code>is null</code> 判断为空</p>
</li>
<li><p><code>is not null</code> 判断为非空</p>
</li>
</ul>
<p>注意，<code>is null</code> 和<strong>空字符串</strong><code>&quot;&quot;</code> 是有区别的。学过 js 基础之后，你应该知道：空字符串并非 null，只不过是里面的值为空而已；空字符串也是会占有内存空间的。</p>
<p>举例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> qianguyihao_table <span class="keyword">where</span> name <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="join-联表查询"><a href="#join-联表查询" class="headerlink" title="join 联表查询"></a>join 联表查询</h2><h3 id="联表查询命令"><a href="#联表查询命令" class="headerlink" title="联表查询命令"></a>联表查询命令</h3><ul>
<li><p><code>tableA inner join tableB</code>：表 A 与表 B 匹配的行会出现在结果中。</p>
</li>
<li><p><code>tableA left join tableB</code>：表 A 与表 B 匹配的行会出现在结果中。表 A 中独有的数据，对应表 B 中用 null 填充。</p>
</li>
<li><p><code>tableA right join tableB</code>：表 A 与表 B 匹配的行会出现在结果中。表 B 中独有的数据，对应表 A 中用 null 填充。</p>
</li>
</ul>
<p>光是这样看，不好理解，我们来举个例子。</p>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><p>现在有下面这两张表：作者表 author、图书表 book。</p>
<p><strong>表 1</strong>、作者表 author：</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">authorId</th>
<th align="left">authorName</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">11</td>
<td align="left">王小波</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">12</td>
<td align="left">吴军</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">88</td>
<td align="left">千古壹号</td>
</tr>
</tbody></table>
<p><strong>表 2</strong>、图书表 book：</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">bookId</th>
<th align="left">bookName</th>
<th>authorId</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">201</td>
<td align="left">黄金时代</td>
<td>11</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">202</td>
<td align="left">白银时代</td>
<td>11</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">203</td>
<td align="left">青铜时代</td>
<td>11</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">204</td>
<td align="left">浪潮之巅</td>
<td>12</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">205</td>
<td align="left">硅谷之谜</td>
<td>12</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">206</td>
<td align="left">数学之美</td>
<td>12</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left">777</td>
<td align="left">设计心理学</td>
<td>99</td>
</tr>
</tbody></table>
<p>注意，表2中的每本图书都有对应的 authorId，这个 authorId 就是对应表1中的 authorId。<strong>通过 authorId 把两张表关联起来</strong>。</p>
<p>通过联表查询上面的两张表，我们来对比一下查询结果。</p>
<p><strong>情况 0</strong>：（inner join）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> author <span class="keyword">INNER</span> <span class="keyword">JOIN</span> book;</span><br></pre></td></tr></table></figure>

<p>查询结果：</p>
<p><img src="https://github.com/qianguyihao/Web/blob/master/img/20200418_2300.png"></p>
<p>上面这种查询，没有意义，因为没有加任何查询条件。</p>
<p><strong>情况 1</strong>：（inner join）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> author <span class="keyword">INNER</span> <span class="keyword">JOIN</span> book <span class="keyword">ON</span> author.authorId <span class="operator">=</span> book.authorId;</span><br></pre></td></tr></table></figure>

<p>查询结果：</p>
<p><img src="https://github.com/qianguyihao/Web/blob/master/img/20200418_2305.png"></p>
<p>上面这行命令，跟下面这行命令等价：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> author, book <span class="keyword">WHERE</span> author.authorId <span class="operator">=</span> book.authorId;</span><br></pre></td></tr></table></figure>

<p><strong>情况 2</strong>：（left join）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> author <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> book <span class="keyword">ON</span> author.authorId <span class="operator">=</span> book.authorId;</span><br></pre></td></tr></table></figure>

<p>查询结果：</p>
<p><img src="https://github.com/qianguyihao/Web/blob/master/img/20200418_2310.png"></p>
<p><strong>情况 3</strong>：（right join）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> author <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> book <span class="keyword">ON</span> author.authorId <span class="operator">=</span> book.authorId;</span><br></pre></td></tr></table></figure>

<p>查询结果：</p>
<p><img src="https://github.com/qianguyihao/Web/blob/master/img/20200418_2315.png"></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qmhball/article/details/8000003">Mysql 联表查询</a></li>
</ul>
<h2 id="自关联查询"><a href="#自关联查询" class="headerlink" title="自关联查询"></a>自关联查询</h2><p>涉及到层级关系时可以用自关联查询。</p>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>当一个查询结果是另一个查询的条件时，这个查询称之为子查询。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/04-MySQL%E5%AD%97%E6%AE%B5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/01/10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/04-MySQL%E5%AD%97%E6%AE%B5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" itemprop="url">04-MySQL字段的数据类型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:25+08:00">
                2021-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>MySQL 中的字段，主要有四种数据类型：</p>
<ul>
<li><p>整型（整数）</p>
</li>
<li><p>小数</p>
</li>
<li><p>字符串类型</p>
</li>
<li><p>时间日期类型</p>
</li>
</ul>
<p>下面来详细讲一讲。</p>
<h2 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h2><h3 id="整数类型的分类"><a href="#整数类型的分类" class="headerlink" title="整数类型的分类"></a>整数类型的分类</h3><p>MySQL中，整型有五种：</p>
<ul>
<li><p>迷你整型：tinyint，使用<strong>1个字节</strong>存储整数，最多存储256个整数（-128~127）。</p>
</li>
<li><p>短整型：smallint，使用<strong>2个字节</strong>存储整数。</p>
</li>
<li><p>中整型：mediumint，使用<strong>3个字节</strong>存储整数。</p>
</li>
<li><p>标准整型：int，使用<strong>4个字节</strong>存储整数。</p>
</li>
<li><p>大整型：bigint，使用<strong>8个字节</strong>存储。</p>
</li>
</ul>
<p><strong>强调</strong>：</p>
<p>（1）如果你不知道用哪一种，或者懒得计算，那就用标准整型 <code>int</code>吧，这个用的最多。</p>
<p>（2）整型在 MySQL 中默认是有符号的，即有正负；无符号需要使用 <code>unsigned</code> 修饰整型，代表正整数。</p>
<p><strong>举例</strong>：</p>
<p>在指定的表中新增 age 字段，要求 age 是正整数：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_qiangu1 <span class="keyword">add</span> age <span class="type">int</span> unsigned;</span><br></pre></td></tr></table></figure>

<h3 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h3><p>如果需要新建整型的字段，设计思路如下：</p>
<p>（1）确定需要存储的数据是整数。</p>
<p>（2）预估整数的范围，选择合适的整数类型。</p>
<p>（3）确定这个整数是否需要包含负数。</p>
<h3 id="整数类型的取值范围"><a href="#整数类型的取值范围" class="headerlink" title="整数类型的取值范围"></a>整数类型的取值范围</h3><p>todo。参考链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/slyjit/article/details/54290486">https://blog.csdn.net/slyjit/article/details/54290486</a></p>
<h3 id="整数类型的显示宽度、零填充"><a href="#整数类型的显示宽度、零填充" class="headerlink" title="整数类型的显示宽度、零填充"></a>整数类型的显示宽度、零填充</h3><blockquote>
<p>我们在很多设计表中，可能会看到比如 <code>int(11)</code>这种数据类型，这里面的 <code>11</code>代表的就是<code>显示宽度</code>。</p>
</blockquote>
<p>所谓的<strong>显示宽度</strong>，其实就是显示的时候，看到的最少数字个数。</p>
<p>比如 int(2) ，表示不管你的数值是多少，最少可以看到两个数字。假如你存的数值是9，没有满两位，就会在前面补零，显示为<code>09</code>；假如你的数值是120，超过了显示宽度，则直接显示原始值，不会做<strong>零填充</strong>。</p>
<p><strong>显示宽度的注意事项</strong>：</p>
<ul>
<li><p>显示宽度只适用于 MySQL 的整数类型。</p>
</li>
<li><p>显示宽度只是指明 MySQL 整数类型最少显示的数字个数（可以通过desc查看表字段显示）。</p>
</li>
<li><p><strong>显示宽度只是在显示的时候改变数值的样式，不会对原本的值进行更改</strong>。</p>
</li>
<li><p>显示宽度和数值类型的取值范围无关。例如int(10) 他的取值范围依然是(-2 147 483 648，2 147 483 647)。</p>
</li>
</ul>
<p><strong>零填充的注意事项</strong>：</p>
<ul>
<li><p>要想让显示宽度自动进行<strong>零填充</strong>，必须要配合 <code>ZEROFILL</code>这个关键字一起使用。</p>
</li>
<li><p><strong>零填充只能针对正整数</strong>，也就是说，<code>ZEROFILL</code> 要求整型为无符号型。</p>
</li>
</ul>
<p><strong>举例</strong>：</p>
<p>1、新建一张表，然后在这张表中新增 num1 字段，要求 num1 显示3位，不够3位的自动进行零填充：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 新建一张表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_qiangu1 (</span><br><span class="line">  id <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 显示宽度有效（正确写法）</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_qiangu1 <span class="keyword">add</span> num1 <span class="type">int</span>(<span class="number">3</span>) zerofill;</span><br><span class="line"></span><br><span class="line"># 对比：普通写法，显示宽度无效</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_qiangu1 <span class="keyword">add</span> num2 <span class="type">int</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"># 对比：普通写法</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_qiangu1 <span class="keyword">add</span> num3 <span class="type">int</span>;</span><br></pre></td></tr></table></figure>

<p>上述命令中，如果把 <code>zerofill</code> 这个关键字去掉，是达不到显示宽度的效果的。执行完上述命令后，我们执行 <code>desc table_qiangu1</code> 命令，对比一下 num1、num2、num3 的字段结构就知道了：</p>
<p><img src="https://img.smyhvae.com/20200423_1050.png"></p>
<p>上方截图可以看到，只有 num1 才有显示宽度，它可以进行零填充，num2、num3不行。我们往表中插入整数 <code>6</code>，然后看看显示结果，就一目了然：</p>
<p><img src="https://img.smyhvae.com/20200423_1055.png"></p>
<p>参考链接：<a target="_blank" rel="noopener" href="https://juejin.im/post/5b24a2c251882574d73c6f82">MySql数据库 数值类型的显示宽度</a></p>
<h2 id="小数"><a href="#小数" class="headerlink" title="小数"></a>小数</h2><p>MySQL 中的小数分为两大类：</p>
<p>浮点型的数据分为两种：</p>
<ul>
<li><p>单精度：float，使用4个字节存储，精度范围为6-7位有效数字。</p>
</li>
<li><p>双精度：double，使用8个字节存储，精度范围为14-15位有效数字。</p>
</li>
</ul>
<p>注意：</p>
<ul>
<li><p>浮点数超过精度范围会自动进行四舍五入。</p>
</li>
<li><p>精度可以指定整数和小数部分。比如</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/18/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/20/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">260</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://175.24.123.148/ycitoj/" title="YCITOJ" target="_blank">YCITOJ</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张天伟</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
