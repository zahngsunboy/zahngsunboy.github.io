<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="欢迎访问！">
<meta property="og:type" content="website">
<meta property="og:title" content="天伟小站">
<meta property="og:url" content="http://example.com/page/20/index.html">
<meta property="og:site_name" content="天伟小站">
<meta property="og:description" content="欢迎访问！">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="张天伟">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/20/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>天伟小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">天伟小站</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">盐城工学院</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/Node.js%E4%BB%A3%E7%A0%81%E4%B8%BE%E4%BE%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/Node.js%E4%BB%A3%E7%A0%81%E4%B8%BE%E4%BE%8B/" class="post-title-link" itemprop="url">01-数据库的基础知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="在-Node-js-上建一个-http-服务器"><a href="#在-Node-js-上建一个-http-服务器" class="headerlink" title="在 Node.js 上建一个 http 服务器"></a>在 Node.js 上建一个 http 服务器</h2><p>（1）新建一个文件 <code>server01.js</code>，然后在里面输入如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);  <span class="comment">//引入 node.js里面的一个http包。因为引入之后，我们不会去修改它，所以用常量来表示</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一台服务器</span></span><br><span class="line"><span class="keyword">var</span> server =  http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;   <span class="comment">//当有人来访问这台服务器时，就会执行 function 回调函数</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;有人来访问我了&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8080</span>);   <span class="comment">//要让服务器设置为监听状态，端口设置为8080</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意看注释。</p>
<p>我们把上面这个 js 文件跑起来，然后在浏览器端输入<code>http://localhost:8080/</code>，每请求一次，服务器的控制台就会打印 <code>有人来访问我了</code>。</p>
<p>（2）write()函数和 end()函数：</p>
<p>将上面的代码修改如下：</p>
<p>server02.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一台服务器</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;   <span class="comment">//当有人来访问这个服务器时，就会执行function 这个回调函数</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;有人来访问我了&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    response.write(<span class="string">&#x27;smyhvae&#x27;</span>);  <span class="comment">//向浏览器输出内容</span></span><br><span class="line">    response.end();   <span class="comment">//结束了，浏览器你走吧。</span></span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>function 回调函数里可以设置两个参数：request 和 response。<code>response.write()</code>表示向浏览器输出一些内容。</p>
<p>将上面的 js 代码跑起来，产生的问题是，无论我们在浏览器端输入<code>http://localhost:8080/1.html</code>，还是输入<code>http://localhost:8080/2.jpg</code>，浏览器上显示的都是<code>smyhvae</code>。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/KOA2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/KOA2/" class="post-title-link" itemprop="url">01-数据库的基础知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="KOA2-简介"><a href="#KOA2-简介" class="headerlink" title="KOA2 简介"></a>KOA2 简介</h2><p>KOA已经发展到了第二个版本，简称 KOA2。突出的特点是插件和中间件，</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/JavaScript%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%9AES6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/JavaScript%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%9AES6/" class="post-title-link" itemprop="url">JavaScript模块化：ES6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="模块化开发的引入"><a href="#模块化开发的引入" class="headerlink" title="模块化开发的引入"></a>模块化开发的引入</h2><h3 id="JS开发的弊端"><a href="#JS开发的弊端" class="headerlink" title="JS开发的弊端"></a>JS开发的弊端</h3><p>JS 在使用时存在两大问题，而 Node.js 可以很好地避免这两个问题：</p>
<ul>
<li><p>文件依赖。比如 a 文件依赖 b 文件，b 文件依赖 c 文件。而 Node.js 中的文件依赖，不需要人工维护和人为分析。</p>
</li>
<li><p>命名冲突。js 的各个文件是相互开放的，容易导致命名冲突。而 Node.js 是属于半封闭的状态，可以指定哪些内容是开放的，哪些内容是封闭的。</p>
</li>
</ul>
<p>Node.js 在解决这两个问题时，用到的就是模块化开发。</p>
<h3 id="软件开发中的模块化开发"><a href="#软件开发中的模块化开发" class="headerlink" title="软件开发中的模块化开发"></a>软件开发中的模块化开发</h3><p>一个功能就是一个模块，多个模块可以组成完整的应用，抽离一个模块不会影响其他功能的运行。</p>
<p>效果如下：</p>
<p><img src="http://img.smyhvae.com/20200409_1934.png"></p>
<h3 id="Node-js-中的模块化开发"><a href="#Node-js-中的模块化开发" class="headerlink" title="Node.js 中的模块化开发"></a>Node.js 中的模块化开发</h3><p>Node.js 规定，一个 JS 文件就是一个模块，模块内部定义的变量和函数默认情况下在外部无法访问。</p>
<p>模块内部可以使用 <code>exports</code> 对象进行成员导出， 使用 <code>require</code> 方法导入其他模块。效果如下：</p>
<p><img src="http://img.smyhvae.com/20200409_1932.png"></p>
<h2 id="ES6模块化的基本语法"><a href="#ES6模块化的基本语法" class="headerlink" title="ES6模块化的基本语法"></a>ES6模块化的基本语法</h2><h3 id="ES6模块化的说明"><a href="#ES6模块化的说明" class="headerlink" title="ES6模块化的说明"></a>ES6模块化的说明</h3><p><strong>依赖模块需要编译打包处理</strong>。原因如下：</p>
<ul>
<li><p>（1）有些浏览器不支持 ES6 的语法，写完 ES6 的代码后，需要通过<code>Babel</code>将 ES6 转化为 ES5。</p>
</li>
<li><p>（2）生成了ES5之后，里面仍然有<code>require</code>语法，而浏览器并不认识<code>require</code>这个关键字。此时，可以用 <code>Browserify</code>编译打包 js，进行再次转换。</p>
</li>
</ul>
<p>推荐学习链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/module">http://es6.ruanyifeng.com/#docs/module</a></li>
</ul>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><p><strong>导出模块</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export</span><br></pre></td></tr></table></figure>


<p><strong>引入模块</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import xxx from &#x27;路径&#x27;</span><br></pre></td></tr></table></figure>


<h2 id="ES6模块化的使用举例（自定义模块）"><a href="#ES6模块化的使用举例（自定义模块）" class="headerlink" title="ES6模块化的使用举例（自定义模块）"></a>ES6模块化的使用举例（自定义模块）</h2><h3 id="1、初始化项目"><a href="#1、初始化项目" class="headerlink" title="1、初始化项目"></a>1、初始化项目</h3><p>（1）在工程文件中新建如下目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">js</span><br><span class="line">    | src</span><br><span class="line">    	| module1.js</span><br><span class="line">    	| module2.js</span><br><span class="line">    	| module3.js</span><br><span class="line">    	| main.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">index.html</span><br></pre></td></tr></table></figure>

<p>（2）在工程的根目录下，新建文件<code>package.json</code>，内容如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;es6-babel-browserify&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、环境配置：安装babel-和-browserify等"><a href="#2、环境配置：安装babel-和-browserify等" class="headerlink" title="2、环境配置：安装babel 和 browserify等"></a>2、环境配置：安装babel 和 browserify等</h3><p>（1）安装babel 和 browserify：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-cli -g</span><br><span class="line"></span><br><span class="line">npm install babel-preset-es2015 --save-dev</span><br><span class="line"></span><br><span class="line">npm install browserify -g</span><br></pre></td></tr></table></figure>


<p>安装 babel 的详细解释，可以参考本人的另外一篇文章：<a target="_blank" rel="noopener" href="https://github.com/smyhvae/Web/blob/master/10-ES6/03-ES6%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.md">ES6的介绍和环境配置</a></p>
<p>（2）新建.babelrc：</p>
<p>在根目录下新建文件<code>.babelrc</code>，输入如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;:[</span><br><span class="line">        &quot;es2015&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;plugins&quot;:[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、编写代码"><a href="#3、编写代码" class="headerlink" title="3、编写代码"></a>3、编写代码</h3><p>（1）module1.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露模块：采用分别暴露的方式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我是 module1 中的 foo1&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我是 module2 中的 foo2&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br></pre></td></tr></table></figure>



<p>（2）module2.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露模块：采用统一暴露的方式</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我是 module2 中的 fn1&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我是 module2 中的 fn2&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//统一暴露</span></span><br><span class="line"><span class="keyword">export</span> &#123; fn1, fn2 &#125;;</span><br></pre></td></tr></table></figure>


<p>（3）module3.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露模块：采用默认暴露的方式。</span></span><br><span class="line"><span class="comment">//默认暴露的方式可以暴露任意数据类型，暴露的是什么数据，接收到的就是什么数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//语法格式：export default value;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我是 module3 中 default 方式暴露的函数&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<p>这里，我们采取了一种新的暴露方式（默认暴露），在暴露时，加上了<code>default</code>这个关键字。代码里暴露了一个箭头函数，稍后，我们注意在main.js里是怎么引入module3.js的。</p>
<p>注意，我们只能写一次 default，也就是说，只能进行一次默认暴露。</p>
<p>（4）module4.js：（default方式暴露多个属性）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暴露模块：采用默认暴露的方式。</span></span><br><span class="line"><span class="comment">//默认暴露的方式可以暴露任意数据类型，暴露的是什么数据，接收到的就是什么数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//语法格式：export default value;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;我是 module4 中 default 方式暴露的属性 name&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;我是 module4 中 default 方式暴露的函数 foo&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里，我们依旧采取了默认暴露的方式，只能写一次 default。代码里暴露了一个对象（对象里存放了一个属性、一个方法）。稍后，我们注意在main.js里是怎么引入module4.js的。</p>
<p>如果我想暴露多个属性、多个对象怎呢？很简单，把你想要暴露的所有内容，都放在default里，包成一个对象。你看module4.js就是如此， 同时暴露了多个属性&amp;方法。</p>
<p>（5）main.js：</p>
<p>这个是主模块。现在，我们来看一下，它如何引入上面的四个模块。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//主模块。引入其他的模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; foo1, foo2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./module1&#x27;</span>; <span class="comment">//采用解构赋值的形式进行导入。注意，括号里的对象名，要和 module1 中的对象名一致。</span></span><br><span class="line"><span class="keyword">import</span> &#123; fn1, fn2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./module2&#x27;</span>;   <span class="comment">//采用解构赋值的形式进行导入。注意，括号里的对象名，要和 module2 中的对象名一致。</span></span><br><span class="line"><span class="keyword">import</span> myModule3 <span class="keyword">from</span> <span class="string">&#x27;./module3&#x27;</span>;   <span class="comment">//module3 模块是采用 default 方式进行暴露的，myModule3 这个名字是我随便起的</span></span><br><span class="line"><span class="keyword">import</span> myModule4 <span class="keyword">from</span> <span class="string">&#x27;./module4&#x27;</span>;   <span class="comment">//module4 模块是采用 default 方式进行暴露的，myModule4 这个名字是我随便起的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用module1、module2中的内容</span></span><br><span class="line">foo1();</span><br><span class="line">foo2();</span><br><span class="line">fn1();</span><br><span class="line">fn2();</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用module3中的内容</span></span><br><span class="line">myModule3();</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用module4中的内容</span></span><br><span class="line"><span class="built_in">console</span>.log(myModule4.name);  <span class="comment">//module4中的属性</span></span><br><span class="line">myModule4.foo();              <span class="comment">//module4中的方法</span></span><br></pre></td></tr></table></figure>

<p>我们可以看出：（具体请看注释，非常重要）</p>
<ul>
<li><p>module1和module2是采用<strong>常规暴露</strong>的形式，在引入它们时，模块名要一致。而且，要求用<strong>对象解构赋值</strong>的形式，而不是用 <code>import myModule from ...</code>这种形式（否则会报错 undefined）。</p>
</li>
<li><p>module2和module3是采用<strong>默认暴露</strong>的形式，在引入它们时，模块名随便起。</p>
</li>
</ul>
<p>（6）index.html：</p>
<p>在这里引入main.js即可。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;dist/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="4、编译转换"><a href="#4、编译转换" class="headerlink" title="4、编译转换"></a>4、编译转换</h3><p>如果我们不进行转换，而是直接在 index.html 中加载 js/src/main.js，是会报错的：</p>
<p>接下来，我们就进行转换。</p>
<p>（1）利用  babel 将 ES6 转换为 ES5：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">babel src -d build      //build目录会自动生成</span><br></pre></td></tr></table></figure>

<p>上方命令的意思是，将<code>src</code>目录下的所有ES6文件转化为ES5文件，并放在<code>build</code>目录下（<code>build</code>目录会被自动创建）。</p>
<p>转化成ES5之后，我们发现，如果直接在 index.html 中加载<code>build</code>目录下的ES5文件，也是会报错的，因为浏览器不认识<code>main.js</code>里的<code>require</code>关键字：</p>
<p><img src="http://img.smyhvae.com/20180414_1410.png"></p>
<p>于是，我们还要进行一次转换。</p>
<p>（2）利用<code>Browserify</code>编译打包 <code>build</code>目录下的 ES5 文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browserify build/main.js -o dist/main.js     //dist目录需要手动创建</span><br></pre></td></tr></table></figure>

<p>dist/main.js就是我们需要引入到 index.html 里的文件。</p>
<p>以后，我们每次修改完ES6的代码，就要执行上面的两个命令，重新生成新的js文件。</p>
<p>运行效果：</p>
<p><img src="http://img.smyhvae.com/20180414_1615.png"></p>
<p>工程文件：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://download.csdn.net/download/smyhvae/10348940">2018-04-13-ES6Demo.rar</a></li>
</ul>
<h2 id="ES6模块化的使用举例（引入第三方模块）"><a href="#ES6模块化的使用举例（引入第三方模块）" class="headerlink" title="ES6模块化的使用举例（引入第三方模块）"></a>ES6模块化的使用举例（引入第三方模块）</h2><p>下载 jQuery 包：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jquery@1      //下载jQuery 1.X 的版本里最新的</span><br></pre></td></tr></table></figure>

<p>在main.js 中引入上面的 jQuery：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import $ from &#x27;jQuery&#x27;;</span><br></pre></td></tr></table></figure>


<p>然后我们就可以通过<code>$</code>这个符号去写jQuery的代码了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/JavaScript%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%9ACMD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/JavaScript%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%9ACMD/" class="post-title-link" itemprop="url">JavaScript模块化：CMD</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="CMD的基本语法"><a href="#CMD的基本语法" class="headerlink" title="CMD的基本语法"></a>CMD的基本语法</h2><h3 id="CMD的概念"><a href="#CMD的概念" class="headerlink" title="CMD的概念"></a>CMD的概念</h3><p><strong>CMD</strong>（Common Module Definition）：同步模块定义。CMD专门用于浏览器端，模块的加载是同步的。模块在使用时才会加载执行。</p>
<p><a href=""><strong>CMD规范</strong></a>：是 <strong><a target="_blank" rel="noopener" href="http://seajs.org/">SeaJS</a></strong> 在推广过程中对模块化定义的规范化产出。</p>
<h3 id="SeaJS"><a href="#SeaJS" class="headerlink" title="SeaJS"></a>SeaJS</h3><p>SeaJS：一个基于CMD规范实现的模块化开发解决方案。</p>
<p>官网链接：</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://seajs.org/">http://seajs.org/</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/seajs/seajs">https://github.com/seajs/seajs</a></p>
</li>
</ul>
<p>推荐学习链接：</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.zhangxinxu.com/sp/seajs/">http://www.zhangxinxu.com/sp/seajs/</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/module">http://es6.ruanyifeng.com/#docs/module</a></p>
</li>
</ul>
<h3 id="暴露模块的方式"><a href="#暴露模块的方式" class="headerlink" title="暴露模块的方式"></a>暴露模块的方式</h3><blockquote>
<p>不管是定义没有依赖的模块，还是定义有依赖的模块，参数只有一个，那就是 function。</p>
</blockquote>
<p><strong>定义没有依赖的模块</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">exports</span>.xxx = value</span><br><span class="line"></span><br><span class="line">    <span class="comment">//暴露模块</span></span><br><span class="line">    <span class="built_in">module</span>.exports = value</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>参数只有一个，那就是 function。function 里有三个参数：</p>
<p><strong>定义有依赖的模块</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义有依赖的模块</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//引入依赖的模块(同步的方式)</span></span><br><span class="line">    <span class="keyword">var</span> module2 = <span class="built_in">require</span>(<span class="string">&#x27;./module2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//引入依赖的模块(异步的方式)</span></span><br><span class="line">    <span class="built_in">require</span>.async(<span class="string">&#x27;./module3&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">m3</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//暴露模块</span></span><br><span class="line">    <span class="built_in">exports</span>.xxx = value</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上面的代码可以看到，在引入依赖的模块时，有两种引入的方式：同步和异步。</p>
<h3 id="引入模块的方式"><a href="#引入模块的方式" class="headerlink" title="引入模块的方式"></a>引入模块的方式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">require</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> m1 = <span class="built_in">require</span>(<span class="string">&#x27;./module1&#x27;</span>)</span><br><span class="line">    <span class="keyword">var</span> m4 = <span class="built_in">require</span>(<span class="string">&#x27;./module4&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    m1.show()</span><br><span class="line">    m4.show()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>




<h2 id="SeaJS的使用举例（自定义模块）"><a href="#SeaJS的使用举例（自定义模块）" class="headerlink" title="SeaJS的使用举例（自定义模块）"></a>SeaJS的使用举例（自定义模块）</h2><h3 id="1、创建项目结构"><a href="#1、创建项目结构" class="headerlink" title="1、创建项目结构"></a>1、创建项目结构</h3><p>在工程文件中新建如下目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">js</span><br><span class="line">    | libs</span><br><span class="line">      	| sea.js</span><br><span class="line">    | modules</span><br><span class="line">      	| module1.js</span><br><span class="line">      	| module2.js</span><br><span class="line">      	| module3.js</span><br><span class="line">      	| module4.js</span><br><span class="line">      	| main.js     //主模块</span><br><span class="line">index.html</span><br></pre></td></tr></table></figure>


<h3 id="2、下载SeaJS，并导入"><a href="#2、下载SeaJS，并导入" class="headerlink" title="2、下载SeaJS，并导入"></a>2、下载SeaJS，并导入</h3><ul>
<li><p>官网: <a target="_blank" rel="noopener" href="https://seajs.github.io/seajs/docs/#downloads">https://seajs.github.io/seajs/docs/#downloads</a></p>
</li>
<li><p>GitHub：<a target="_blank" rel="noopener" href="https://github.com/seajs/seajs">https://github.com/seajs/seajs</a></p>
</li>
</ul>
<p>在官网下载<code>sea.js</code>文件，然后将其拷贝到项目的<code>js/libs/</code>目录中。这样的话，就导入成功了。</p>
<h3 id="3、自定义模块"><a href="#3、自定义模块" class="headerlink" title="3、自定义模块"></a>3、自定义模块</h3><p>（1）module1.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义没有依赖的模块</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;我是 module1 中的内容&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//暴露模块</span></span><br><span class="line">    <span class="built_in">module</span>.exports = &#123; foo1 &#125;;  <span class="comment">//暴露出去的是 foo1这个函数对象</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>（2）module2.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义没有依赖的模块</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;我是 module2 中的内容&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//暴露模块</span></span><br><span class="line">    <span class="built_in">module</span>.exports = foo2;  <span class="comment">//可以理解成：exports就是 foo2 这个函数</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>（3）module3.js:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义没有依赖的模块</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">require</span>,<span class="built_in">exports</span>,<span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> data = <span class="string">&#x27;我是 module3 中的内容&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//暴露模块</span></span><br><span class="line">    <span class="built_in">exports</span>.module3 = &#123; foo3 &#125;;  <span class="comment">//可以理解成：给 export 对象暴露了 module3 这个属性，这个属性里有foo3 这个函数。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>（4）module4.js：</p>
<p>这个模块依赖了 module2 和 module3。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义有依赖的模块</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;我是 module4 中的内容&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//同步的方式引入 module2</span></span><br><span class="line">    <span class="keyword">let</span> myModule2 = <span class="built_in">require</span>(<span class="string">&#x27;./module2&#x27;</span>);</span><br><span class="line">    myModule2();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//异步的方式引入 module3</span></span><br><span class="line">    <span class="built_in">require</span>.async(<span class="string">&#x27;./module3&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">myModule3</span>) </span>&#123;</span><br><span class="line">        myModule3.module3.foo3();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">exports</span>.foo4 = foo4;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>（5）main.js：</p>
<ul>
<li><p><code>module1.js</code>没有依赖其他的模块，它是独立的</p>
</li>
<li><p><code>module4.js</code>依赖了<code>module2</code>和<code>module3</code>。</p>
</li>
</ul>
<p>因此，让<code>main.js</code>依赖<code>module1.js</code>和<code>module4</code>就够了。</p>
<p>main.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//主模块（主模块不需要导出）</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">require</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//导入 module1</span></span><br><span class="line">    <span class="keyword">let</span> module1 = <span class="built_in">require</span>(<span class="string">&#x27;./module1&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(module1.foo1());  <span class="comment">//执行foo1函数后，将返回值打印</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//导入 module4</span></span><br><span class="line">    <span class="keyword">let</span> module4 = <span class="built_in">require</span>(<span class="string">&#x27;./module4&#x27;</span>);</span><br><span class="line">    module4.foo4();</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>（6）index.html：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入 sea.js库 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/libs/sea.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 引入主模块</span></span></span><br><span class="line"><span class="javascript">        seajs.use(<span class="string">&#x27;./js/modules/main.js&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>打印结果：</p>
<p><img src="http://img.smyhvae.com/20180412_1955.png"></p>
<h2 id="others"><a href="#others" class="headerlink" title="others"></a>others</h2><h3 id="SeaJS-的介绍"><a href="#SeaJS-的介绍" class="headerlink" title="SeaJS 的介绍"></a>SeaJS 的介绍</h3><p>SeaJS：一个基于CMD规范实现的模块化开发解决方案。</p>
<p>作者：Alibaba 玉伯。</p>
<p>官网：<a target="_blank" rel="noopener" href="http://seajs.org/">http://seajs.org/</a></p>
<p>GitHub：<a target="_blank" rel="noopener" href="https://github.com/seajs/seajs">https://github.com/seajs/seajs</a></p>
<p>现在官网变成了：<a target="_blank" rel="noopener" href="https://seajs.github.io/seajs/docs/">https://seajs.github.io/seajs/docs/</a></p>
<p>特性：</p>
<ul>
<li><p>简单友好的模块定义规范。</p>
</li>
<li><p>自然直观的代码组织方式。</p>
</li>
</ul>
<p><img src="http://img.smyhvae.com/20180303_2107.png"></p>
<h3 id="RequireJS（AMD）、SeaJS（CDM）、CommonJS、ES6-的对比"><a href="#RequireJS（AMD）、SeaJS（CDM）、CommonJS、ES6-的对比" class="headerlink" title="RequireJS（AMD）、SeaJS（CDM）、CommonJS、ES6 的对比"></a>RequireJS（AMD）、SeaJS（CDM）、CommonJS、ES6 的对比</h3><p>1、RequireJS 和 AMD：</p>
<p><img src="http://img.smyhvae.com/20180303_1653.png"></p>
<p>异步模块定义，特点是依赖前置。</p>
<p>2、SeaJS 和 CMD：</p>
<p>同步模块定义。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 所有模块都通过 define 来定义</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//通过 require 引入依赖</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> $ <span class="built_in">require</span>(<span class="string">`jquery`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> Spinning = <span class="built_in">require</span>(<span class="string">`./spinning`</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>3、CommonJS：</p>
<p><img src="http://img.smyhvae.com/20180303_1701.png"></p>
<p>以上三个都是 ES5里面的规范。</p>
<p>4、ES6：</p>
<p>ES6的特性：export/import</p>
<p><img src="http://img.smyhvae.com/20180303_1704.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/JavaScript%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%9AAMD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/JavaScript%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%9AAMD/" class="post-title-link" itemprop="url">JavaScript模块化：AMD</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="AMD的基本语法"><a href="#AMD的基本语法" class="headerlink" title="AMD的基本语法"></a>AMD的基本语法</h2><h3 id="AMD的概念"><a href="#AMD的概念" class="headerlink" title="AMD的概念"></a>AMD的概念</h3><p><strong>AMD</strong>（Asynchronous Module Definition）：异步模块定义。AMD专门用于浏览器端，模块的加载是异步的。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/amdjs/amdjs-api"><strong>AMD规范</strong></a>：是 <strong><a target="_blank" rel="noopener" href="http://requirejs.org/">RequireJS</a></strong> 在推广过程中对模块化定义的规范化产出。</p>
<p>RequireJS：一个基于AMD规范实现的模块化开发解决方案。</p>
<h3 id="暴露模块的方式"><a href="#暴露模块的方式" class="headerlink" title="暴露模块的方式"></a>暴露模块的方式</h3><p><strong>定义没有依赖的模块</strong>：（参数只有一个 function）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> 模块</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


<p><strong>定义有依赖的模块</strong>：（参数有两个：模块名、function）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义有依赖的模块：第一个参数为数组</span></span><br><span class="line">define([<span class="string">&#x27;module1&#x27;</span>, <span class="string">&#x27;module2&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">m1, m2</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> 模块</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>代码解释：</p>
<ul>
<li><p>第一个参数必须是数组，里面存放的是，需要依赖的其他的模块。</p>
</li>
<li><p>第二个参数是function，里面带了形参 m1 和 m2，分别代表了 module1 和 module2。这个形参的作用是，前面依赖的模块一旦声明了，就可以一一对应地注入到 function中去，从而在 function 内部使用依赖的模块。这种方式称之为<strong>显式声明依赖注入</strong>。</p>
</li>
</ul>
<h3 id="引入模块的方式"><a href="#引入模块的方式" class="headerlink" title="引入模块的方式"></a>引入模块的方式</h3><p>在主模块中引入其他的模块：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在主模块中引入其他的模块</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;module1&#x27;</span>, <span class="string">&#x27;module2&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">m1, m2</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    使用m1 / m2</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="RequireJS：是AMD的实现"><a href="#RequireJS：是AMD的实现" class="headerlink" title="RequireJS：是AMD的实现"></a>RequireJS：是AMD的实现</h3><ul>
<li><p><a target="_blank" rel="noopener" href="http://www.requirejs.org/">http://www.requirejs.org/</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2012/11/require_js.html">http://www.ruanyifeng.com/blog/2012/11/require_js.html</a></p>
</li>
</ul>
<h2 id="RequireJS的使用举例（自定义模块）"><a href="#RequireJS的使用举例（自定义模块）" class="headerlink" title="RequireJS的使用举例（自定义模块）"></a>RequireJS的使用举例（自定义模块）</h2><h3 id="1、创建项目结构"><a href="#1、创建项目结构" class="headerlink" title="1、创建项目结构"></a>1、创建项目结构</h3><p>在工程文件中新建如下目录：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">js</span><br><span class="line">    | libs</span><br><span class="line"></span><br><span class="line">    | modules</span><br><span class="line">      	| alerter.js</span><br><span class="line">      	| dataService.js</span><br><span class="line">    | main.js</span><br><span class="line"></span><br><span class="line">index.html</span><br></pre></td></tr></table></figure>

<p>所有的代码写完之后，项目结构如下：</p>
<p><img src="http://img.smyhvae.com/20180411_1331.png"></p>
<h3 id="2、下载require-js，并导入"><a href="#2、下载require-js，并导入" class="headerlink" title="2、下载require.js，并导入"></a>2、下载require.js，并导入</h3><ul>
<li><p>官网: <a target="_blank" rel="noopener" href="http://requirejs.org/docs/download.html">http://requirejs.org/docs/download.html</a></p>
</li>
<li><p>GitHub：<a target="_blank" rel="noopener" href="https://github.com/requirejs/requirejs">https://github.com/requirejs/requirejs</a></p>
</li>
</ul>
<p>在官网下载<code>require.js</code>文件：</p>
<p><img src="http://img.smyhvae.com/20180411_1127.png"></p>
<p>然后将<code>require.js</code>文件拷贝到项目的<code>js/libs/</code>目录中。</p>
<p>这样的话，就导入成功了。</p>
<h3 id="3、自定义模块"><a href="#3、自定义模块" class="headerlink" title="3、自定义模块"></a>3、自定义模块</h3><p>（1）dataService.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义没有依赖的模块</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;我是 dataService.js中的内容&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//暴露模块</span></span><br><span class="line">    <span class="keyword">return</span> &#123; getName &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>这模块没有依赖。</p>
<p>（2）alerter.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义有依赖的模块</span></span><br><span class="line">define([<span class="string">&#x27;myDataService&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">dataService</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> msg = <span class="string">&#x27;我是 aleter.js中的内容&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showMsg</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(dataService.getName());  <span class="comment">//调用了 myDataService 模块中的内容</span></span><br><span class="line">        <span class="built_in">console</span>.log(msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//暴露模块</span></span><br><span class="line">    <span class="keyword">return</span> &#123; showMsg &#125;;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这个模块，依赖了<code>myDataService</code>这个模块，模块名是我自己起的。稍后，我们会在main.js中做映射，将<code>myDataService</code>这个名字和<code>dataService.js</code>文件关联起来。</p>
<p>（3）main.js：</p>
<blockquote>
<p>这个是主模块。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">requirejs.config(&#123;</span><br><span class="line">    <span class="comment">//baseUrl: &#x27;js/&#x27;,     //基本路径</span></span><br><span class="line">    <span class="attr">paths</span>: &#123;    <span class="comment">//配置路径</span></span><br><span class="line">        <span class="attr">myDataService</span>: <span class="string">&#x27;./modules/dataService&#x27;</span>,</span><br><span class="line">        <span class="attr">myAlerter</span>: <span class="string">&#x27;./modules/alerter&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">requirejs([<span class="string">&#x27;myAlerter&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">alerter</span>) </span>&#123;</span><br><span class="line">    alerter.showMsg();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>这个模块，依赖了<code>myAlerter</code>这个模块，模块名是我自己起的。并且，我们在文件的上方做了映射，将<code>myAlerter</code>这个名字和<code>alerter.js</code>文件关联了起来。</p>
<p>我们来讲一下最上方的几行代码（即<code>requirejs.config</code>里的内容）的意思：</p>
<ul>
<li><p>我们可以看到，文件（3）依赖了文件（2），文件（2）依赖了文件（1）。</p>
</li>
<li><p><code>paths</code>里做的就是映射：将键<code>myDataService</code>和文件<code>dataService.js</code>进行关联，将键<code>myAlerter</code>和文件<code>alerter.js</code>进行关联。</p>
</li>
</ul>
<p>另外，再讲一下注释里的<code>baseUrl</code>的用法：如果没有这个注释，那么<code>paths</code>里的路径，是从<strong>当前这个文件</strong>（main.js）的角度出发的；如果加了一行<code>baseUrl</code>，表明它是 paths 里所有路径的最开头的部分，<code>baseUrl</code>的路径是从<strong>项目的根目录</strong>的角度出发的。</p>
<p>（4）index.html：</p>
<p>这个是入口文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 先通过 src 引入 require.js 文件，然后通过 data-main 引入主模块（main.js） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">&quot;js/main.js&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/libs/require.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意，上面的代码中，我们直接通过<code>src</code>属性引入<code>requre.js </code>文件，一旦这个文件发挥作用了，会去找<code>data-main</code>属性里的指向，它正好指向的是主模块。</p>
<p>有了上面这种引入的方式，我们就不用再老土地引入多个<code>&lt;script&gt;</code>标签了。</p>
<p>运行 index.html，打印结果如下：</p>
<p><img src="http://img.smyhvae.com/20180411_1740.png"></p>
<p>项目源码：<a target="_blank" rel="noopener" href="https://download.csdn.net/download/smyhvae/10341963">2018-04-11-RequireJSDemo</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/ES6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/ES6/" class="post-title-link" itemprop="url">01-数据库的基础知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>ECMAScript 是 JS 的语言标准。而 ES6 是新的 JS 语法标准。</p>
<h3 id="发展历史"><a href="#发展历史" class="headerlink" title="发展历史"></a>发展历史</h3><p>20180303_1633.png</p>
<ul>
<li>2015年6月，ES6正式发布。</li>
</ul>
<h3 id="ES6-的其他优势"><a href="#ES6-的其他优势" class="headerlink" title="ES6 的其他优势"></a>ES6 的其他优势</h3><ul>
<li><p>使用 babel 语法转换器，支持低端浏览器</p>
</li>
<li><p>流行的库基本都是基于 ES6 构建。 React 默认使用 ES6 新源发开发。</p>
</li>
</ul>
<h2 id="ES6-的常用语法"><a href="#ES6-的常用语法" class="headerlink" title="ES6 的常用语法"></a>ES6 的常用语法</h2><h3 id="ES6语法概览"><a href="#ES6语法概览" class="headerlink" title="ES6语法概览"></a>ES6语法概览</h3><ul>
<li><p>块级作用域、字符串</p>
</li>
<li><p>对象扩展、解构</p>
</li>
<li><p>类、模块化等。</p>
</li>
</ul>
<h3 id="作用域：let-和-const"><a href="#作用域：let-和-const" class="headerlink" title="作用域：let 和 const"></a>作用域：let 和 const</h3><ul>
<li><p>用 <code>let</code>定义变量 ，替代 var</p>
</li>
<li><p>用const 定义常量（定义后，不可修改）</p>
</li>
<li><p>作用域和 {}</p>
</li>
</ul>
<p>举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = <span class="string">&#x27;haha&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">`smyhvae`</span>;</span><br></pre></td></tr></table></figure>


<h3 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h3><p>我们以前让字符串进行拼接的时候，是这样做的：（传统写法的字符串拼接）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;smyhvae&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="string">&#x27;26&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;name:&#x27;</span>+name+<span class="string">&#x27;,age:&#x27;</span>+age);   <span class="comment">//传统写法</span></span><br></pre></td></tr></table></figure>


<p>这种写法，比较繁琐，而且容易出错。</p>
<p>现在有了 ES6 语法，字符串拼接可以这样写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;smyhvae&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="string">&#x27;26&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;name:&#x27;</span>+name+<span class="string">&#x27;,age:&#x27;</span>+age);   <span class="comment">//传统写法</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`name:<span class="subst">$&#123;name&#125;</span>,age:<span class="subst">$&#123;age&#125;</span>`</span>);  <span class="comment">//ES6 写法</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意，上方代码中，倒数第二行用的是单引号，最后一行用的是反引号（在tab键的上方）。</p>
<h3 id="函数扩展"><a href="#函数扩展" class="headerlink" title="函数扩展"></a>函数扩展</h3><p>ES6 中函数的用法：</p>
<ul>
<li><p>参数默认值</p>
</li>
<li><p>箭头函数</p>
</li>
<li><p>展开运算符</p>
</li>
</ul>
<p>定义和调用函数：（传统写法）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn1(<span class="string">&#x27;smyhvae&#x27;</span>);</span><br></pre></td></tr></table></figure>


<p>定义和调用函数：（ES6写法）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn2 = <span class="function">(<span class="params">name</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn2(<span class="string">&#x27;smyhvae&#x27;</span>);</span><br></pre></td></tr></table></figure>


<p>上面两端代码，执行的结果是一样的。</p>
<p>当然，也可以给上面这个函数的参数加一个默认值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn2 = <span class="function">(<span class="params">name=<span class="string">&#x27;enen&#x27;</span></span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn2();        <span class="comment">//参数用默认值 enen</span></span><br><span class="line">fn2(<span class="string">&#x27;smyhvae&#x27;</span>);</span><br></pre></td></tr></table></figure>



<p>比如说，1秒后执行一段代码，可以用箭头函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;something&#x27;</span>);</span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p>如果函数体只有一条 return 语句，那么大括号可以省略：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myDouble = <span class="function"><span class="params">x</span>=&gt;</span>x*<span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(myDouble(<span class="number">5</span>));  <span class="comment">//打印结果为10</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>箭头函数的好处：</p>
<ul>
<li><p>简写代码</p>
</li>
<li><p>保持 this 的作用域</p>
</li>
</ul>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/CommonJS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/CommonJS/" class="post-title-link" itemprop="url">01-数据库的基础知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="全局对象"><a href="#全局对象" class="headerlink" title="全局对象"></a>全局对象</h2><h3 id="global"><a href="#global" class="headerlink" title="global"></a>global</h3><p>类似于客户端 JavaScript 运行环境中的 window。</p>
<h2 id="process"><a href="#process" class="headerlink" title="process"></a>process</h2><p>用于获取当前的 Node 进程信息，一般用于获取环境变量之类的信息。</p>
<h3 id="console"><a href="#console" class="headerlink" title="console"></a>console</h3><p>Node 中内置的 console 模块，提供操作控制台的输入输出功能，常见使用方式与客户端类似。</p>
<h2 id="全局函数"><a href="#全局函数" class="headerlink" title="全局函数"></a>全局函数</h2><ul>
<li><p>setInterval(callback, millisecond)</p>
</li>
<li><p>clearInterval(timer)</p>
</li>
<li><p>setTimeout(callback, millisecond)</p>
</li>
<li><p>clearTimeout(timer)</p>
</li>
<li><p>Buffer：Class</p>
<ul>
<li>用于操作二进制数据</li>
<li>以后介绍</li>
</ul>
</li>
</ul>
<h2 id="Node-调试"><a href="#Node-调试" class="headerlink" title="Node 调试"></a>Node 调试</h2><h3 id="最简单的调试"><a href="#最简单的调试" class="headerlink" title="最简单的调试"></a>最简单的调试</h3><p>最方便也是最简单的调试：console.log()</p>
<h3 id="Node-原生的调试"><a href="#Node-原生的调试" class="headerlink" title="Node 原生的调试"></a>Node 原生的调试</h3><p>网址：<a target="_blank" rel="noopener" href="https://nodejs.org/api/debugger.html">https://nodejs.org/api/debugger.html</a></p>
<h3 id="第三方模块提供的调试工具"><a href="#第三方模块提供的调试工具" class="headerlink" title="第三方模块提供的调试工具"></a>第三方模块提供的调试工具</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm install node-inspector –g   //方式一</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ npm install devtool -g          //方式二</span><br></pre></td></tr></table></figure>

<h3 id="开发工具的调试"><a href="#开发工具的调试" class="headerlink" title="开发工具的调试"></a>开发工具的调试</h3><ul>
<li><p>Visual Studio Code</p>
</li>
<li><p>WebStorm</p>
</li>
</ul>
<h2 id="模块化结构"><a href="#模块化结构" class="headerlink" title="模块化结构"></a>模块化结构</h2><p>Node 实现 CommonJS 规范，所以可以使用模块化的方式组织代码结构。</p>
<ul>
<li><p>Node 采用的模块化结构是按照 CommonJS 规范。</p>
</li>
<li><p>模块与文件是一一对应关系，即加载一个模块，实际上就是加载对应的一个模块文件。</p>
</li>
</ul>
<h3 id="CommonJS-规范"><a href="#CommonJS-规范" class="headerlink" title="CommonJS 规范"></a>CommonJS 规范</h3><p>CommonJS 就是一套约定标准，不是技术。用于约定我们的代码应该是怎样的一种结构。</p>
<p>参考链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://wiki.commonjs.org/wiki/CommonJS">http://wiki.commonjs.org/wiki/CommonJS</a></li>
</ul>
<h3 id="常用内置模块"><a href="#常用内置模块" class="headerlink" title="常用内置模块"></a>常用内置模块</h3><ul>
<li><p><code>path</code>：处理文件路径。</p>
</li>
<li><p><code>fs</code>：操作（CRUD）文件系统。</p>
</li>
<li><p><code>child_process</code>：新建子进程。</p>
</li>
<li><p><code>util</code>：提供一系列实用小工具。</p>
</li>
<li><p><code>http</code>：提供 HTTP 服务器功能。</p>
</li>
<li><p><code>url</code>：用于解析 URL。</p>
</li>
<li><p><code>querystring</code>：解析 URL 中的查询字符串。</p>
</li>
<li><p><code>crypto</code>：提供加密和解密功能。</p>
</li>
</ul>
<p>总结：更多内容可以参考 api文档：<a target="_blank" rel="noopener" href="https://nodejs.org/api/">https://nodejs.org/api/</a></p>
<h2 id="文件系统操作"><a href="#文件系统操作" class="headerlink" title="文件系统操作"></a>文件系统操作</h2><h3 id="相关模块"><a href="#相关模块" class="headerlink" title="相关模块"></a>相关模块</h3><ul>
<li><p>fs：基础的文件操作 API</p>
</li>
<li><p>path：提供和路径相关的操作 API</p>
</li>
<li><p>readline：用于读取大文本文件，一行一行读</p>
</li>
<li><p>fs-extra（第三方）：<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/fs-extra">https://www.npmjs.com/package/fs-extra</a></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/07-Node.js%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/07-Node.js%E6%93%8D%E4%BD%9CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-title-link" itemprop="url">07-Node.js操作MySQL数据库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="Node-js-连接-MySQL"><a href="#Node-js-连接-MySQL" class="headerlink" title="Node.js 连接 MySQL"></a>Node.js 连接 MySQL</h2><p>（1）安装 mysql 包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install mysql</span><br></pre></td></tr></table></figure>

<p>（2）引入 mysql 包：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&quot;mysql&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>（3）建立连接：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mysql = <span class="built_in">require</span>(<span class="string">&quot;mysql&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> options = &#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">  <span class="comment">//port:&quot;3306&quot;, //可选，默认3306</span></span><br><span class="line">  <span class="attr">user</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;xxx&#x27;</span>, <span class="comment">// 这里改成你自己的数据库连接密码</span></span><br><span class="line">  <span class="attr">database</span>: <span class="string">&quot;qiangu_database&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//创建与数据库进行连接的连接对象</span></span><br><span class="line"><span class="keyword">let</span> connection = mysql.createConnection(options);</span><br><span class="line"></span><br><span class="line"><span class="comment">//建立连接</span></span><br><span class="line">connection.connect(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 数据库连接失败</span></span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 数据库连接成功</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;数据库连接成功&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>正常来说，运行程序后，应该会提示<code>数据库连接成功</code>。</p>
<p>如果在运行时提示错误<code>Client does not support authentication protocol requested by server</code>，解决办法如下：(在终端进入 sql 之后，输入如下命令)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 注意，这里的 <span class="string">&#x27;root&#x27;</span> 请填你的<span class="keyword">user</span>账号， <span class="string">&#x27;localhost&#x27;</span> 请填 你的 host， <span class="string">&#x27;password&#x27;</span> 请填你的密码</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 然后执行如下命令</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h2 id="Node-js-增删改查-MySQL"><a href="#Node-js-增删改查-MySQL" class="headerlink" title="Node.js 增删改查 MySQL"></a>Node.js 增删改查 MySQL</h2><p>针对下面这张表：</p>
<p><img src="https://github.com/qianguyihao/Web/blob/master/img/20200418_1728.png"></p>
<p>通过 Node.js可以对其进行一些增删改查操作。代码举例如下。</p>
<h3 id="1、查询表"><a href="#1、查询表" class="headerlink" title="1、查询表"></a>1、查询表</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> options = &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="comment">//port:&quot;3306&quot;,//可选，默认3306</span></span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;xxx&#x27;</span>, <span class="comment">// 这里改成你自己的数据库密码</span></span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;qiangu_database&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建与数据库进行连接的连接对象</span></span><br><span class="line"><span class="keyword">let</span> connection = mysql.createConnection(options);</span><br><span class="line"></span><br><span class="line"><span class="comment">//建立连接</span></span><br><span class="line">connection.connect(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 数据库连接失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 数据库连接成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;数据库连接成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1、查询表</span></span><br><span class="line"><span class="keyword">let</span> strSql1 = <span class="string">&#x27;select * from qiangu_student_table&#x27;</span>;</span><br><span class="line">connection.query(strSql1, <span class="function">(<span class="params">err, result, fields</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 表查询失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 表查询成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;qiangu_student_table 表查询结果：&#x27;</span> + <span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;fields:&#x27;</span> + <span class="built_in">JSON</span>.stringify(fields));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>打印结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">qiangu_student_table 表查询结果：</span><br><span class="line">[&#123;<span class="string">&quot;id&quot;</span>:1,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;千古壹号&quot;</span>,<span class="string">&quot;age&quot;</span>:28&#125;,&#123;<span class="string">&quot;id&quot;</span>:2,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;许嵩&quot;</span>,<span class="string">&quot;age&quot;</span>:34&#125;,&#123;<span class="string">&quot;id&quot;</span>:3,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;邓紫棋&quot;</span>,<span class="string">&quot;age&quot;</span>:28&#125;]</span><br><span class="line"></span><br><span class="line">fields:[</span><br><span class="line">    &#123;<span class="string">&quot;catalog&quot;</span>:<span class="string">&quot;def&quot;</span>,<span class="string">&quot;db&quot;</span>:<span class="string">&quot;qiangu_database&quot;</span>,<span class="string">&quot;table&quot;</span>:<span class="string">&quot;qiangu_student_table&quot;</span>,<span class="string">&quot;orgTable&quot;</span>:<span class="string">&quot;qiangu_student_table&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;id&quot;</span>,<span class="string">&quot;orgName&quot;</span>:<span class="string">&quot;id&quot;</span>,<span class="string">&quot;charsetNr&quot;</span>:63,<span class="string">&quot;length&quot;</span>:11,<span class="string">&quot;type&quot;</span>:3,<span class="string">&quot;flags&quot;</span>:0,<span class="string">&quot;decimals&quot;</span>:0,<span class="string">&quot;zeroFill&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;protocol41&quot;</span>:<span class="literal">true</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;catalog&quot;</span>:<span class="string">&quot;def&quot;</span>,<span class="string">&quot;db&quot;</span>:<span class="string">&quot;qiangu_database&quot;</span>,<span class="string">&quot;table&quot;</span>:<span class="string">&quot;qiangu_student_table&quot;</span>,<span class="string">&quot;orgTable&quot;</span>:<span class="string">&quot;qiangu_student_table&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;name&quot;</span>,<span class="string">&quot;orgName&quot;</span>:<span class="string">&quot;name&quot;</span>,<span class="string">&quot;charsetNr&quot;</span>:33,<span class="string">&quot;length&quot;</span>:765,<span class="string">&quot;type&quot;</span>:253,<span class="string">&quot;flags&quot;</span>:0,<span class="string">&quot;decimals&quot;</span>:0,<span class="string">&quot;zeroFill&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;protocol41&quot;</span>:<span class="literal">true</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;catalog&quot;</span>:<span class="string">&quot;def&quot;</span>,<span class="string">&quot;db&quot;</span>:<span class="string">&quot;qiangu_database&quot;</span>,<span class="string">&quot;table&quot;</span>:<span class="string">&quot;qiangu_student_table&quot;</span>,<span class="string">&quot;orgTable&quot;</span>:<span class="string">&quot;qiangu_student_table&quot;</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;age&quot;</span>,<span class="string">&quot;orgName&quot;</span>:<span class="string">&quot;age&quot;</span>,<span class="string">&quot;charsetNr&quot;</span>:63,<span class="string">&quot;length&quot;</span>:11,<span class="string">&quot;type&quot;</span>:3,<span class="string">&quot;flags&quot;</span>:0,<span class="string">&quot;decimals&quot;</span>:0,<span class="string">&quot;zeroFill&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;protocol41&quot;</span>:<span class="literal">true</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2、删除表</span></span><br><span class="line"><span class="keyword">let</span> strSql2 = <span class="string">&#x27;drop table test2_table&#x27;</span>;</span><br><span class="line">connection.query(strSql2, <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 表删除失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 表删除成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;表删除成功：&#x27;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>打印结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">表删除成功：</span><br><span class="line">OkPacket &#123;</span><br><span class="line">    fieldCount: 0,</span><br><span class="line">    affectedRows: 0,</span><br><span class="line">    insertId: 0,</span><br><span class="line">    serverStatus: 2,</span><br><span class="line">    warningCount: 0,</span><br><span class="line">    message: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    protocol41: <span class="literal">true</span>,</span><br><span class="line">    changedRows: 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><p>将上方的sql语句换一下即可：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let strSql3 <span class="operator">=</span> <span class="string">&#x27;drop database qiangu_database&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="2、新建数据库"><a href="#2、新建数据库" class="headerlink" title="2、新建数据库"></a>2、新建数据库</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> options = &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="comment">//port:&quot;3306&quot;,//可选，默认3306</span></span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;smyhvae001&#x27;</span>,</span><br><span class="line">    <span class="comment">// database: &#x27;qiangu_database&#x27;  // 注意，因为代码里是创建新的数据库，所以这里不需要填其他的数据库名</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建与数据库进行连接的连接对象</span></span><br><span class="line"><span class="keyword">let</span> connection = mysql.createConnection(options);</span><br><span class="line"></span><br><span class="line"><span class="comment">//建立连接</span></span><br><span class="line">connection.connect(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 数据库连接失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 数据库连接成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;数据库连接成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建新的数据库</span></span><br><span class="line"><span class="keyword">const</span> strSql4 = <span class="string">&#x27;create database qiangu_database3&#x27;</span>;</span><br><span class="line">connection.query(strSql4, <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;新建数据库成功：&#x27;</span> + <span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>打印结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">数据库连接成功</span><br><span class="line">新建数据库成功：&#123;</span><br><span class="line">    <span class="string">&quot;fieldCount&quot;</span>:0,<span class="string">&quot;affectedRows&quot;</span>:1,<span class="string">&quot;insertId&quot;</span>:0,<span class="string">&quot;serverStatus&quot;</span>:2,<span class="string">&quot;warningCount&quot;</span>:0,<span class="string">&quot;message&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;protocol41&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;changedRows&quot;</span>:0</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="3、新建表"><a href="#3、新建表" class="headerlink" title="3、新建表"></a>3、新建表</h3><p>新建表的sql语句举例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `qiangu_table5` (</span><br><span class="line">    `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    `age` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>如果是在 js 代码中执行上面这样命令的话，要记得把 sql 语句存放在字符串里的同一行。</p>
<p>代码举例如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> options = &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="comment">//port:&quot;3306&quot;,//可选，默认3306</span></span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;smyhvae001&#x27;</span>,</span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;qiangu_database&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建与数据库进行连接的连接对象</span></span><br><span class="line"><span class="keyword">let</span> connection = mysql.createConnection(options);</span><br><span class="line"></span><br><span class="line"><span class="comment">//建立连接</span></span><br><span class="line">connection.connect(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 数据库连接失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 数据库连接成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;数据库连接成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 新建表</span></span><br><span class="line"><span class="comment">// 注意，在 js 代码中，sql 语句要存放在字符串里的同一行。</span></span><br><span class="line"><span class="keyword">const</span> strSql5 = <span class="string">&#x27;CREATE TABLE `qianguyihao_table5` (`id` int NOT NULL AUTO_INCREMENT,`name` varchar(255) DEFAULT NULL,`age` int DEFAULT NULL,PRIMARY KEY (`id`));&#x27;</span>;</span><br><span class="line"></span><br><span class="line">connection.query(strSql5, <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 新建表失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 新建表成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;qianguyihao 新建表成功：&#x27;</span> + <span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>打印结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">数据库连接成功</span><br><span class="line">qianguyihao 新建表成功：</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;fieldCount&quot;</span>:0,<span class="string">&quot;affectedRows&quot;</span>:0,<span class="string">&quot;insertId&quot;</span>:0,<span class="string">&quot;serverStatus&quot;</span>:2,<span class="string">&quot;warningCount&quot;</span>:0,<span class="string">&quot;message&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;protocol41&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;changedRows&quot;</span>:0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="在指定的表中插入数据"><a href="#在指定的表中插入数据" class="headerlink" title="在指定的表中插入数据"></a>在指定的表中插入数据</h3><p>在指定的表中插入数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在指定的表中插入数据</span></span><br><span class="line"><span class="keyword">const</span> strSql6 = <span class="string">&quot;insert into qianguyihao_table5 (name, age) values (&#x27;千古壹号&#x27;, &#x27;28&#x27;)&quot;</span>;</span><br><span class="line"></span><br><span class="line">connection.query(strSql6, <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 插入数据失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 在指定的表中插入数据成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;qianguyihao 在指定的表中插入数据成功：&#x27;</span> + <span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>打印结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">qianguyihao 在指定的表中插入数据成功：</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;fieldCount&quot;</span>:0,<span class="string">&quot;affectedRows&quot;</span>:1,<span class="string">&quot;insertId&quot;</span>:1,<span class="string">&quot;serverStatus&quot;</span>:2,<span class="string">&quot;warningCount&quot;</span>:0,<span class="string">&quot;message&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;protocol41&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;changedRows&quot;</span>:0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果插入的数据是变量（比如是用户提交上来的数据），那么，sql 语句可以这样写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在指定的表中插入数据（数据作为变量）</span></span><br><span class="line"><span class="keyword">const</span> strSql7 = <span class="string">&quot;insert into qianguyihao_table5 (name, age) values (?, ?)&quot;</span>;</span><br><span class="line"></span><br><span class="line">connection.query(strSql7, [<span class="string">&#x27;许嵩&#x27;</span>, <span class="string">&#x27;34&#x27;</span>], <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 插入数据失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 在指定的表中插入数据成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;qiangauyihao 在指定的表中插入数据成功：&#x27;</span> + <span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>





      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/06-Node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%EF%BC%9Apath%E8%B7%AF%E5%BE%84%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/06-Node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%EF%BC%9Apath%E8%B7%AF%E5%BE%84%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">06-Node.js内置模块：path路径模块</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="path-路径模块"><a href="#path-路径模块" class="headerlink" title="path 路径模块"></a>path 路径模块</h2><p>Node.js 通过<code>path</code>这个内置模块，提供了一些路径操作的API，具体可以参考官方的api文档。这里列举一些常用的API。</p>
<h3 id="path-extname-获取文件-路径的扩展名"><a href="#path-extname-获取文件-路径的扩展名" class="headerlink" title="path.extname() 获取文件/路径的扩展名"></a>path.extname() 获取文件/路径的扩展名</h3><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.extname(myPath);</span><br></pre></td></tr></table></figure>

<p>代码解释：</p>
<ul>
<li><p>获取 <code>myPath</code> 这个文件或者路径的扩展名。</p>
</li>
<li><p><code>myPath</code> 这个参数要求是字符串。如果 <code>myPath</code> 不是字符串，则抛出 TypeError。</p>
</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;hello.txt&#x27;</span>); <span class="comment">// 返回 &#x27;.txt&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;www.qianguyihao.com&#x27;</span>); <span class="comment">// 返回 &#x27;.com&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;index.coffee.md&#x27;</span>);  <span class="comment">// 返回 &#x27;.md&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;index.&#x27;</span>);  <span class="comment">// 返回 &#x27;.&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;index&#x27;</span>);  <span class="comment">// 返回 &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;.index&#x27;</span>);  <span class="comment">// 返回 &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">&#x27;.index.md&#x27;</span>);  <span class="comment">// 返回 &#x27;.md&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="path-resolve-生成完成的绝对路径"><a href="#path-resolve-生成完成的绝对路径" class="headerlink" title="path.resolve() 生成完成的绝对路径"></a>path.resolve() 生成完成的绝对路径</h3><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.resolve([...myPaths])</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li><p>将路径或路径片段的序列解析为绝对路径。</p>
</li>
<li><p>返回的路径是<strong>从右往左</strong>处理，后面的每个 myPath 被依次解析，直到构造出一个完整的绝对路径。</p>
</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">&#x27;/foo1/foo2&#x27;</span>, <span class="string">&#x27;qianguyihao&#x27;</span>, <span class="string">&#x27;foo3&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> result1 = path.resolve(...arr1);</span><br><span class="line"><span class="built_in">console</span>.log(result1); <span class="comment">// 打印结果：/foo1/foo2/qianguyihao/foo3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">&#x27;/foo1/foo2&#x27;</span>, <span class="string">&#x27;/qianguyihao&#x27;</span>, <span class="string">&#x27;foo3&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> result2 = path.resolve(...arr2);</span><br><span class="line"><span class="built_in">console</span>.log(result2); <span class="comment">// 打印结果：/qianguyihao/foo3</span></span><br></pre></td></tr></table></figure>

<h3 id="几个常见路径"><a href="#几个常见路径" class="headerlink" title="几个常见路径"></a>几个常见路径</h3><ul>
<li><p><code>__dirname</code>：这是一个常量，表示：当前执行文件所在<strong>完整目录</strong>。</p>
</li>
<li><p><code>__filename</code>：这是一个常量。表示：当前执行文件的<strong>完整目录 + 文件名</strong>。</p>
</li>
<li><p><code>process.cwd</code>：获取当前执行 Node命令 时的目录名。</p>
</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(__dirname);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(__filename);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(process.cwd());</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ node app.js</span><br><span class="line"></span><br><span class="line">/Users/smyhvae/qianguyihao</span><br><span class="line">/Users/smyhvae/qianguyihao/app.js</span><br><span class="line">/Users/smyhvae/qianguyihao</span><br></pre></td></tr></table></figure>

<h3 id="path-join-将多个路径进行拼接"><a href="#path-join-将多个路径进行拼接" class="headerlink" title="path.join() 将多个路径进行拼接"></a>path.join() 将多个路径进行拼接</h3><p>如果是我们手动拼接路径，容易出错。这个时候，可以利用 path.join() 方法将路径进行拼接。</p>
<p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.join([...paths]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>解释：使用平台特定的分隔符作为定界符将所有给定的 path 片段连接在一起，然后规范化生成的路径。</p>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = path.join(__dirname, <span class="string">&#x27;./app.js&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result1); <span class="comment">// 返回：/Users/smyhvae/qianguyihao/app.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result2 = path.join(<span class="string">&#x27;/foo1&#x27;</span>, <span class="string">&#x27;foo2&#x27;</span>, <span class="string">&#x27;./foo3&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result2); <span class="comment">// 返回：/foo1/foo2/foo3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result3 = path.join(<span class="string">&#x27;/foo1&#x27;</span>, <span class="string">&#x27;foo2&#x27;</span>, <span class="string">&#x27;/foo3&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result3); <span class="comment">// 返回：/foo1/foo2/foo3</span></span><br></pre></td></tr></table></figure>

<h2 id="OS-系统模块"><a href="#OS-系统模块" class="headerlink" title="OS 系统模块"></a>OS 系统模块</h2><ul>
<li>os.networkInterfaces() 查看网络地址</li>
</ul>
<h2 id="我的公众号"><a href="#我的公众号" class="headerlink" title="我的公众号"></a>我的公众号</h2><p>想学习<strong>更多技能</strong>？不妨关注我的微信公众号：<strong>千古壹号</strong>（id：<code>qianguyihao</code>）。</p>
<p>扫一扫，你将发现另一个全新的世界，而这将是一场美丽的意外：</p>
<p><img src="https://img.smyhvae.com/20200102.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/01/11-Node.js/05-Node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%EF%BC%9Afs%E6%96%87%E4%BB%B6%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="张天伟">
      <meta itemprop="description" content="欢迎访问！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天伟小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/11-Node.js/05-Node.js%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%EF%BC%9Afs%E6%96%87%E4%BB%B6%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">05-Node.js内置模块：fs文件模块</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:00:27" itemprop="dateCreated datePublished" datetime="2021-12-01T10:00:27+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 12:47:39" itemprop="dateModified" datetime="2021-11-28T12:47:39+08:00">2021-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><ArticleTopAd></ArticleTopAd></p>
<h2 id="Node-js-的官方API文档"><a href="#Node-js-的官方API文档" class="headerlink" title="Node.js 的官方API文档"></a>Node.js 的官方API文档</h2><ul>
<li><p>Node.js 的API文档（英文）： <a target="_blank" rel="noopener" href="https://nodejs.org/docs/latest-v8.x/api/index.html">https://nodejs.org/docs/latest-v8.x/api/index.html</a></p>
</li>
<li><p>Node.js 的API文档（中文）：<a target="_blank" rel="noopener" href="http://nodejs.cn/api/">http://nodejs.cn/api/</a></p>
</li>
</ul>
<p>关于 Node.js 的内置模块和常见API，可以看官方文档。</p>
<p>查阅文档时，稳定指数如下：</p>
<ul>
<li><p>红色：废弃。</p>
</li>
<li><p>橙色：实验。表示当前版本可用，其他版本不确定。也许不向下兼容，建议不要在生产环境中使用该特性。</p>
</li>
<li><p>绿色：稳定。与 npm 生态系统的兼容性是最高的优先级。</p>
</li>
</ul>
<h2 id="Node-js-中模块的分类"><a href="#Node-js-中模块的分类" class="headerlink" title="Node.js 中模块的分类"></a>Node.js 中模块的分类</h2><p>Node.js 应用由模块组成，采用 CommonJS 模块规范。Node.js中的模块分为三种：</p>
<ul>
<li><p>内置模块</p>
</li>
<li><p>第三方模块</p>
</li>
<li><p>自定义模块</p>
</li>
</ul>
<p>下面简单介绍一下。</p>
<h3 id="1、内置模块"><a href="#1、内置模块" class="headerlink" title="1、内置模块"></a>1、内置模块</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> process = <span class="built_in">require</span>(<span class="string">&#x27;process&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(process.version);</span><br><span class="line"><span class="built_in">console</span>.log(path.resolve(<span class="string">&#x27;../&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>require方法用于加载模块。</p>
<p>常见的内置模块包括：</p>
<ul>
<li><p>FS：文件系统模块</p>
</li>
<li><p>path：路径模块</p>
</li>
<li><p>OS：操作系统相关</p>
</li>
<li><p>net：网络相关</p>
</li>
<li><p>http</p>
</li>
<li><p>…</p>
</li>
</ul>
<p>你可能会有疑问：Node.js 这么牛吗？还能直接和操作系统做交互？</p>
<p>带着这个疑问，我们不妨简单看看 Node.js 的源码，以 os 模块举例：</p>
<ul>
<li><p>打开os模块的源码：<a target="_blank" rel="noopener" href="https://github.com/nodejs/node/blob/master/lib/os.js">https://github.com/nodejs/node/blob/master/lib/os.js</a>，翻到最底部，找到 <code>cpus</code>这个方法</p>
</li>
<li><p>进而找到 <code>getCPUs()</code></p>
</li>
<li><p>internalBinding(‘os’)：通过 internalBinding 可以调用系统底层的方法。internalBinding 主要是 JS 虚拟机在做的事情。</p>
</li>
<li><p><code>internalBinding(&#39;os&#39;)</code> 的实现，在 <a target="_blank" rel="noopener" href="https://github.com/nodejs/node/blob/master/src/node_os.cc">https://github.com/nodejs/node/blob/master/src/node_os.cc</a> 里，里面都是 C++ 的代码。比如有一个<code>getCPUs</code>方法。</p>
</li>
</ul>
<p>现在你知道了，JS本身是没有能力获取底层系统资源的，这一切都是 JS虚拟机在和底层做交互，然后通过 JS 的表现形式，暴露给应用层。</p>
<p>另外，还有很多库，是直接使用C/++编写的，通过编译之后，再提供给 JS 应用层调用，或者直接提供给 Node.js层使用。</p>
<p>**所有的编程语言底层都会回归C/C++**，甚至是汇编语言。</p>
<h3 id="2、require-加载第三方包的机制"><a href="#2、require-加载第三方包的机制" class="headerlink" title="2、require 加载第三方包的机制"></a>2、require 加载第三方包的机制</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>require 加载第三方包的机制：</p>
<p>（1）第三方包安装好后，这个包一般会存放在当前项目的 node_modules 文件夹中。我们找到这个包的 package.json 文件，并且找到里面的main属性对应的入口模块，这个入口模块就是这个包的入口文件。</p>
<p>（2）如果第三方包中没有找到package.json文件，或者package.json文件中没有main属性，则默认加载第三方包中的index.js文件。</p>
<p>（3）如果在 node_modules 文件夹中没有找到这个包，或者以上所有情况都没有找到，则会向上一级父级目录下查找node_modules文件夹，查找规则如上一致。</p>
<p>（4）如果一直找到该模块的磁盘根路径都没有找到，则会报错：can not find module xxx。</p>
<h3 id="3、自定义模块（module）："><a href="#3、自定义模块（module）：" class="headerlink" title="3、自定义模块（module）："></a>3、自定义模块（module）：</h3><p>每个文件就是一个模块，有自己的作用域。在一个文件里面定义的变量、函数、类，都是私有的，对其他文件不可见。</p>
<p>举例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var example = require(&#x27;./example.js&#x27;);</span><br><span class="line">console.log(example.x); // 5</span><br><span class="line">console.log(example.addX(1)); // 6</span><br></pre></td></tr></table></figure>

<h2 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h2><p>今天这篇文章，重点讲一下 Node 内置模块中的 <strong>fs（文件处理模块）</strong>。</p>
<p>在使用文件模块之前，记得先导入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入文件模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>fs 的英文全称是 File System。fs 模块提供了很多 api 方法，我们首先应该学习的方法是<strong>文件读取</strong>。</p>
<p>Node中文件读取的方式主要有以下几种。</p>
<h3 id="异步读取文件-fs-readFile"><a href="#异步读取文件-fs-readFile" class="headerlink" title="异步读取文件 fs.readFile()"></a>异步读取文件 fs.readFile()</h3><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(file[, options], callback(error, data))</span><br></pre></td></tr></table></figure>

<p>代码举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;hello.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;异步读取数据：&#x27;</span> + data2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>如果需要嵌套读取多个文件，可以用 promise 或者 async … await 进行封装。代码举例如下。</p>
<h3 id="promise-封装-fs-readFile"><a href="#promise-封装-fs-readFile" class="headerlink" title="promise 封装 fs.readFile()"></a>promise 封装 fs.readFile()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fsRead</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(path, &#123; <span class="attr">flag</span>: <span class="string">&#x27;r&#x27;</span>, <span class="attr">encoding</span>: <span class="string">&quot;utf-8&quot;</span> &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">//失败执行的内容</span></span><br><span class="line">                reject(err)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//成功执行的内容</span></span><br><span class="line">                resolve(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise1 = fsRead(<span class="string">&#x27;hello1.txt&#x27;</span>)</span><br><span class="line">promise1.then(<span class="function"><span class="params">res1</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res1);</span><br><span class="line">    <span class="keyword">return</span> fsRead(<span class="string">&#x27;hello2.txt&#x27;</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res2</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res2);</span><br><span class="line">    <span class="keyword">return</span> fsRead(<span class="string">&#x27;hello3.txt&#x27;</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res3</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="async-…-await-封装-fs-readFile"><a href="#async-…-await-封装-fs-readFile" class="headerlink" title="async … await 封装 fs.readFile()"></a>async … await 封装 fs.readFile()</h3><p>这个写法更为简洁，推荐。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fsRead</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(path, &#123; <span class="attr">flag</span>: <span class="string">&#x27;r&#x27;</span>, <span class="attr">encoding</span>: <span class="string">&quot;utf-8&quot;</span> &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">//失败执行的内容</span></span><br><span class="line">                reject(err)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//成功执行的内容</span></span><br><span class="line">                resolve(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">ReadList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res1 = <span class="keyword">await</span> fsRead(<span class="string">&#x27;hello1.txt&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> res2 = <span class="keyword">await</span> fsRead(<span class="string">&#x27;hello2.txt&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> res3 = <span class="keyword">await</span> fsRead(<span class="string">&#x27;hello3.txt&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行方法</span></span><br><span class="line">ReadList();</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="同步读取文件-fs-readFileSync"><a href="#同步读取文件-fs-readFileSync" class="headerlink" title="同步读取文件 fs.readFileSync()"></a>同步读取文件 fs.readFileSync()</h3><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.readFileSync(file[, options])</span><br></pre></td></tr></table></figure>

<p>代码举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;hello.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="comment">// 文件不存在，或者权限错误</span></span><br><span class="line">  <span class="keyword">throw</span> e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Node-js-中的同步和异步的区别"><a href="#Node-js-中的同步和异步的区别" class="headerlink" title="Node.js 中的同步和异步的区别"></a>Node.js 中的同步和异步的区别</h3><p>fs模块对文件的几乎所有操作都有同步和异步两种形式。例如：readFile() 和 readFileSync()。</p>
<p>区别：</p>
<ul>
<li><p>同步调用会阻塞代码的执行，异步则不会。</p>
</li>
<li><p>异步调用会将 读取任务 下达到任务队列，直到任务执行完成才会回调。</p>
</li>
<li><p>异常处理方面：同步必须使用 try catch 方式，异步可以通过回调函数的第一个参数。【重要】</p>
</li>
</ul>
<h2 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h2><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fs.write(fd, string[, position[, encoding]], callback)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>async … await 封装：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeFs</span>(<span class="params">path, content</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        fs.writeFile(path, content, &#123; <span class="attr">flag</span>: <span class="string">&quot;a&quot;</span>, <span class="attr">encoding</span>: <span class="string">&quot;utf-8&quot;</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">//console.log(&quot;写入内容出错&quot;)</span></span><br><span class="line">                reject(err)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                resolve(err)</span><br><span class="line">                <span class="comment">//console.log(&quot;写入内容成功&quot;)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">writeList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">await</span> writeFs(<span class="string">&#x27;1.html&#x27;</span>, <span class="string">&quot;&lt;h1&gt;qianguyihao&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    <span class="keyword">await</span> writeFs(<span class="string">&#x27;2.html&#x27;</span>, <span class="string">&quot;&lt;h1&gt;hello world&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    <span class="keyword">await</span> writeFs(<span class="string">&#x27;3.html&#x27;</span>, <span class="string">&quot;&lt;h1&gt;永不止步&lt;/h1&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">writeList()</span><br></pre></td></tr></table></figure>

<h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.unlink(path, callback)</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li>path：文件路径。</li>
<li>callback：回调函数。</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fs.unlink(<span class="string">&#x27;path/file.txt&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件删除成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>备注：<code>fs.unlink()</code> 不能用于删除目录。 如果要删除目录，可以使用 <code>fs.rmdir()</code>。</p>
<h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><p>通过 Buffer 开辟的内存空间，都是连续的内存空间，所以效率比较高。</p>
<p>代码举例1：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 将字符串转成 buffer 对象</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;qianguyihao&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> buffer = Buffer.from(str);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(buffer); <span class="comment">// 输出16进制编码</span></span><br><span class="line"><span class="built_in">console</span>.log(buffer.toString()); <span class="comment">// 输出字符串：qianguyihao</span></span><br></pre></td></tr></table></figure>

<p>代码举例2：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从内存中开辟一个新的缓冲区</span></span><br><span class="line"><span class="keyword">let</span> buffer = Buffer.alloc(<span class="number">20</span>);</span><br><span class="line">buffer[<span class="number">0</span>] = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(buffer);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="读取目录"><a href="#读取目录" class="headerlink" title="读取目录"></a>读取目录</h2><p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.mkdir(path[, options], callback)</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li><p>path：文件路径。</p>
</li>
<li><p>options参数可以是：</p>
<ul>
<li>recursive：是否以递归的方式创建目录，默认为 false。</li>
<li>mode：设置目录权限，默认为 0777。</li>
</ul>
</li>
</ul>
<p>代码举例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">​</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;查看 /tmp 目录&quot;</span>);</span><br><span class="line">fs.readdir(<span class="string">&quot;/tmp/&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err, files</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   files.forEach( <span class="function"><span class="keyword">function</span> (<span class="params">file</span>)</span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log( file );</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>其他的还有：（暂略）</p>
<ul>
<li><p>删除目录</p>
</li>
<li><p>输入输出</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/19/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><a class="extend next" rel="next" href="/page/21/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">张天伟</p>
  <div class="site-description" itemprop="description">欢迎访问！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">261</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张天伟</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
